"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,locationSearch=new URLSearchParams(location.search);!function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=arguments[1];"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.OpenPlayer=t():e.OpenPlayer=t()}(void 0,function(){return function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===(void 0===t?"undefined":_typeof2(t))&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=52)}([function(e,t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==("undefined"==typeof globalThis?"undefined":_typeof2(globalThis))&&globalThis)||n("object"==("undefined"==typeof window?"undefined":_typeof2(window))&&window)||n("object"==("undefined"==typeof self?"undefined":_typeof2(self))&&self)||n("object"==("undefined"==typeof global?"undefined":_typeof2(global))&&global)||function(){return this}()||Function("return this")()},function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.EVENT_OPTIONS=r.DVR_THRESHOLD=r.SUPPORTS_HLS=r.HAS_MSE=r.IS_STOCK_ANDROID=r.IS_SAFARI=r.IS_FIREFOX=r.IS_CHROME=r.IS_EDGE=r.IS_IE=r.IS_ANDROID=r.IS_IOS=r.IS_IPOD=r.IS_IPHONE=r.IS_IPAD=r.UA=r.NAV=void 0,r.NAV="undefined"!=typeof window?window.navigator:null,r.UA=r.NAV?r.NAV.userAgent.toLowerCase():null,r.IS_IPAD=!!r.UA&&(/ipad/i.test(r.UA)&&!window.MSStream),r.IS_IPHONE=!!r.UA&&(/iphone/i.test(r.UA)&&!window.MSStream),r.IS_IPOD=!!r.UA&&(/ipod/i.test(r.UA)&&!window.MSStream),r.IS_IOS=!!r.UA&&(/ipad|iphone|ipod/i.test(r.UA)&&!window.MSStream),r.IS_ANDROID=!!r.UA&&/android/i.test(r.UA),r.IS_IE=!!r.UA&&/(trident|microsoft)/i.test(r.NAV.appName),r.IS_EDGE=!!r.NAV&&("msLaunchUri"in r.NAV&&!("documentMode"in document)),r.IS_CHROME=!!r.UA&&/chrome/i.test(r.UA),r.IS_FIREFOX=!!r.UA&&/firefox/i.test(r.UA),r.IS_SAFARI=!!r.UA&&(/safari/i.test(r.UA)&&!r.IS_CHROME),r.IS_STOCK_ANDROID=!!r.UA&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(r.UA),r.HAS_MSE="undefined"!=typeof window&&"MediaSource"in window,r.SUPPORTS_HLS=function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i&&!r.IS_SAFARI},r.DVR_THRESHOLD=120,r.EVENT_OPTIONS=!r.IS_IE&&{passive:!1}},function(e,t,n){function r(e){if(e){var t=e.parentNode;t&&t.removeChild(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isXml=t.offset=t.hasClass=t.request=t.removeElement=t.loadScript=t.isAudio=t.isVideo=t.getAbsoluteUrl=void 0,t.getAbsoluteUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},t.isVideo=function(e){return"video"===e.tagName.toLowerCase()},t.isAudio=function(e){return"audio"===e.tagName.toLowerCase()},t.loadScript=function(i){return new _Promise(function(e,t){var n=document.createElement("script");n.src=i,n.async=!0,n.onload=function(){r(n),e({})},n.onerror=function(){r(n),t()},document.head&&document.head.appendChild(n)})},t.removeElement=r,t.request=function(e,t,n,i){var r,s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");switch(t){case"text":r="text/plain";break;case"json":r="application/json, text/javascript";break;case"html":r="text/html";break;case"xml":r="application/xml, text/xml";break;default:r="application/x-www-form-urlencoded; charset=UTF-8"}var a=!1,o="application/x-www-form-urlencoded"!==r?"".concat(r,", */*; q=0.01"):"*/".concat("*");s&&(s.open("GET",e,!0),s.setRequestHeader("Accept",o),s.onreadystatechange=function(){if(!a&&4===s.readyState)if(200===s.status){var e;switch(a=!0,t){case"json":e=JSON.parse(s.responseText);break;case"xml":e=s.responseXML;break;default:e=s.responseText}n(e)}else"function"==typeof i&&i(s.status)},s.send())},t.hasClass=function(e,t){return!!(-1<e.className.split(" ").indexOf(t))},t.offset=function(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}},t.isXml=function(e){var t;if(void 0!==window.DOMParser)t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))return!1;t=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}}try{var n=t(e);if(0<n.getElementsByTagName("parsererror").length)return!1;if(n.parseError&&0!==n.parseError.errorCode)return!1}catch(e){return!1}return!0}},function(e,t,n){var i=n(0),r=n(55),s=n(8),a=n(56),o=n(60),l=n(92),u=r("wks"),c=i.Symbol,d=l?c:c&&c.withoutSetter||a;e.exports=function(e){return s(u,e)&&(o||"string"==typeof u[e])||(o&&s(c,e)?u[e]=c[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){var c=n(0),d=n(31).f,h=n(10),f=n(16),p=n(36),v=n(84),m=n(59);e.exports=function(e,t){var n,i,r,s,a,o=e.target,l=e.global,u=e.stat;if(n=l?c:u?c[o]||p(o,{}):(c[o]||{}).prototype)for(i in t){if(s=t[i],r=e.noTargetGet?(a=d(n,i))&&a.value:n[i],!m(l?i:o+(u?".":"#")+i,e.forced)&&void 0!==r){if((void 0===s?"undefined":_typeof2(s))===(void 0===r?"undefined":_typeof2(r)))continue;v(s,r)}(e.sham||r&&r.sham)&&h(s,"sham",!0),f(n,i,s,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.events=t.addEvent=void 0,t.addEvent=function(e,t){var n={};return t&&t.detail&&(n={detail:t.detail}),new CustomEvent(e,n)},t.events=["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"]},function(e,t,n){var i=n(9);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var i=n(15),r={}.hasOwnProperty;e.exports=function(e,t){return r.call(i(e),t)}},function(e,t){e.exports=function(e){return"object"===(void 0===e?"undefined":_typeof2(e))?null!==e:"function"==typeof e}},function(e,t,n){var i=n(11),r=n(12),s=n(18);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(5);e.exports=!i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,n){var i=n(11),r=n(54),s=n(7),a=n(34),o=Object.defineProperty;t.f=i?o:function(e,t,n){if(s(e),t=a(t,!0),s(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(20),r=n(0),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e])||s(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t,n){function i(e){var t=e.split("?")[0],n=t?t.split("\\"):null,i=n?n.pop():null,r=i?i.split("/"):null,s=r?r.pop():null;return s&&-1<s.indexOf(".")?s.substring(s.lastIndexOf(".")+1):""}Object.defineProperty(t,"__esModule",{value:!0}),t.isAutoplaySupported=t.predictType=t.isFlvSource=t.isDashSource=t.isM3USource=t.isHlsSource=t.getExtension=void 0,t.getExtension=i,t.isHlsSource=function(e){return/\.m3u8$/i.test(e.src)||-1<["application/x-mpegURL","application/vnd.apple.mpegurl"].indexOf(e.type)},t.isM3USource=function(e){return/\.m3u$/i.test(e.src)},t.isDashSource=function(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type},t.isFlvSource=function(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||-1<["video/x-flv","video/flv"].indexOf(e.type)},t.predictType=function(e){var t,n=i(e);if(!n)return"video/mp4";switch(n){case"m3u8":case"m3u":t="application/x-mpegURL";break;case"mpd":t="application/dash+xml";break;case"mp3":t="audio/mp3";break;case"webm":t="video/webm";break;case"ogg":t="video/ogg";break;default:t="video/mp4"}return t},t.isAutoplaySupported=function(e,t,n,i,r){var s=e.play();void 0!==s?s.then(function(){return e.pause(),n(!0),i(!1),r()}).catch(function(){e.volume=0,e.muted=!0,e.play().then(function(){return e.pause(),n(!0),i(!0),r()}).catch(function(){e.volume=t,e.muted=!1,n(!1),i(!1),r()})}):(n(!e.paused||"Promise"in window&&s instanceof _Promise),e.pause(),i(!1),r())}},function(e,t,n){var i=n(33);e.exports=function(e){return Object(i(e))}},function(e,t,n){var l=n(0),u=n(10),c=n(8),d=n(36),i=n(37),r=n(26),s=r.get,h=r.enforce,f=String(String).split("String");(e.exports=function(e,t,n,i){var r,s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,o=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||c(n,"name")||u(n,"name",t),(r=h(n)).source||(r.source=f.join("string"==typeof t?t:""))),e!==l?(s?!o&&e[t]&&(a=!0):delete e[t],a?e[t]=n:u(e,t,n)):a?e[t]=n:d(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&s(this).source||i(this)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!1},function(e,t,n){var i=n(0);e.exports=i},function(e,t,n){var s=n(17);e.exports=function(i,r,e){if(s(i),void 0===r)return i;switch(e){case 0:return function(){return i.call(r)};case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}}},function(e,t){e.exports={}},function(e,t,n){var r=n(17),i=function(e){var n,i;this.promise=new e(function(e,t){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=e,i=t}),this.resolve=r(n),this.reject=r(i)};e.exports.f=function(e){return new i(e)}},function(e,t,n){var i=n(32),r=n(33);e.exports=function(e){return i(r(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i,r,s,a=n(83),o=n(0),l=n(9),u=n(10),c=n(8),d=n(38),h=n(39),f=n(40),p="Object already initialized",v=o.WeakMap;if(a||d.state){var m=d.state||(d.state=new v),y=m.get,g=m.has,b=m.set;i=function(e,t){if(g.call(m,e))throw new TypeError(p);return t.facade=e,b.call(m,e,t),t},r=function(e){return y.call(m,e)||{}},s=function(e){return g.call(m,e)}}else{var E=h("state");f[E]=!0,i=function(e,t){if(c(e,E))throw new TypeError(p);return t.facade=e,u(e,E,t),t},r=function(e){return c(e,E)?e[E]:{}},s=function(e){return c(e,E)}}e.exports={set:i,get:r,has:s,enforce:function(e){return s(e)?r(e):i(e,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=r(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}}},function(e,t,n){var i=n(41),r=Math.min;e.exports=function(e){return 0<e?r(i(e),9007199254740991):0}},function(e,t,n){var y=n(7),g=n(68),b=n(27),E=n(21),_=n(69),k=n(67),w=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var i,r,s,a,o,l,u,c=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=E(t,c,1+d+f),v=function(e){return i&&k(i),new w(!0,e)},m=function(e){return d?(y(e),f?p(e[0],e[1],v):p(e[0],e[1])):f?p(e,v):p(e)};if(h)i=e;else{if("function"!=typeof(r=_(e)))throw TypeError("Target is not iterable");if(g(r)){for(s=0,a=b(e.length);s<a;s++)if((o=m(e[s]))&&o instanceof w)return o;return new w(!1)}i=r.call(e)}for(l=i.next;!(u=l.call(i)).done;){try{o=m(u.value)}catch(e){throw k(i),e}if("object"==(void 0===o?"undefined":_typeof2(o))&&o&&o instanceof w)return o}return new w(!1)}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s,a=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),s.set(this,void 0),this.element=e,this.media=t,this.promise=new _Promise(function(e){e({})})}var e,t,i;return e=n,(t=[{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"instance",set:function(e){a(this,s,e)},get:function(){return o(this,s)}},{key:"volume",set:function(e){this.element.volume=e},get:function(){return this.element.volume}},{key:"muted",set:function(e){this.element.muted=e},get:function(){return this.element.muted}},{key:"playbackRate",set:function(e){this.element.playbackRate=e},get:function(){return this.element.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this.element.defaultPlaybackRate=e},get:function(){return this.element.defaultPlaybackRate}},{key:"currentTime",set:function(e){this.element.currentTime=e},get:function(){return this.element.currentTime}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}])&&r(e.prototype,t),i&&r(e,i),n}();s=new WeakMap,t.default=i},function(e,t,n){var i=n(11),r=n(53),s=n(18),a=n(24),o=n(34),l=n(8),u=n(54),c=Object.getOwnPropertyDescriptor;t.f=i?c:function(e,t){if(e=a(e),t=o(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return s(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(5),r=n(25),s="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?s.call(e,""):Object(e)}:Object},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(0),r=n(9),s=i.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},function(e,t,n){var i=n(0),r=n(10);e.exports=function(t,n){try{r(i,t,n)}catch(e){i[t]=n}return n}},function(e,t,n){var i=n(38),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i=n(0),r=n(36),s="__core-js_shared__",a=i[s]||r(s,{});e.exports=a},function(e,t,n){var i=n(55),r=n(56),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},function(e,t){e.exports={}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(13);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i,r=n(7),s=n(93),a=n(42),o=n(40),l=n(63),u=n(35),c=n(39),d="prototype",h="script",f=c("IE_PROTO"),p=function(){},v=function(e){return"<script>"+e+"</"+h+">"},m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;m=i?function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete m[d][a[n]];return m()};o[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p[d]=r(e),n=new p,p[d]=null,n[f]=e):n=m(),void 0===t?n:s(n,t)}},function(e,t,n){var i=n(57),r=n(42);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(8),r=n(15),s=n(39),a=n(99),o=s("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){var i=n(12).f,r=n(8),s=n(3)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var r=n(7),s=n(100);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),i=e instanceof Array}catch(e){}return function(e,t){return r(e),s(t),i?n.call(e,t):e.__proto__=t,e}}():void 0)},function(e,t,n){var i={};i[n(3)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){var i=n(25),r=n(0);e.exports="process"==i(r.process)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.timeToSeconds=t.formatTime=void 0,t.formatTime=function(e,t){var n=Math.floor(e%1*(t||0)),i=Math.floor(e),r=Math.floor(i/60),s=Math.floor(r/60),a=function(e){return e<10?"0".concat(e):e};return r%=60,i%=60,"".concat(0<s?"".concat(a(s),":"):"").concat(a(r),":").concat(a(i)).concat(n?":".concat(a(n)):"")},t.timeToSeconds=function(e){var t=e.replace(/;/g,":").split(":"),n=0;return 3===t.length?(n+=60*parseFloat(t[0])*60,n+=60*parseFloat(t[1]),n+=parseFloat(t[2])):(n+=60*parseFloat(t[0]),n+=parseFloat(t[1])),n}},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,a,o,l,u,c,d,h,f,p,v,m,y,g,b,E=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},_=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(80),n(95),n(105),n(109),n(112),n(132),n(133);var k=s(n(135)),w=s(n(144)),A=s(n(149)),O=n(1),T=n(6),S=n(2),L=n(14),M=function(){function s(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.set(this,void 0),a.set(this,void 0),this.proxy=null,o.set(this,""),l.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d.set(this,{}),h.set(this,!1),f.set(this,void 0),p.set(this,!1),v.set(this,!1),m.set(this,!1),y.set(this,{}),g.set(this,[]),b.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:null,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Video Quality",audioLevels:"Audio Quality",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},mode:"responsive",onError:function(){},pauseOthers:!0,progress:{duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,width:0}),E(this,l,e instanceof HTMLMediaElement?e:document.getElementById(e)),_(this,l)&&(E(this,h,_(this,l).autoplay||!1),"string"==typeof t||Array.isArray(t)||this._mergeOptions(t),_(this,l).volume=_(this,y).startVolume||1,_(this,y).ads&&_(this,y).ads.src&&E(this,u,_(this,y).ads.src),0<_(this,y).startTime&&(_(this,l).currentTime=_(this,y).startTime),E(this,f,_(this,l).volume)),this}var e,t,n;return e=s,n=[{key:"init",value:function(){s.instances={};for(var e=document.querySelectorAll("video.op-player, audio.op-player"),t=0,n=e.length;t<n;t++){var i=e[t],r=i.getAttribute("data-op-settings");new s(i,r?JSON.parse(r):{}).init()}}},{key:"addMedia",value:function(e,t,n,i){s.customMedia.media[t]=i,s.customMedia.optionsKey[t]=e,s.customMedia.rules.push(n)}}],(t=[{key:"init",value:function(){this._isValid()&&(this._wrapInstance(),this._prepareMedia(),this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),s.instances[this.id]=this)}},{key:"load",value:function(){if(this.isMedia())return _(this,c).load()}},{key:"play",value:function(){return _(this,c)&&!_(this,c).loaded&&(_(this,c).load(),_(this,c).loaded=!0),_(this,a)?_(this,a).play():_(this,c).play()}},{key:"pause",value:function(){_(this,a)?_(this,a).pause():_(this,c).pause()}},{key:"destroy",value:function(){var t=this;_(this,a)&&(_(this,a).pause(),_(this,a).destroy());var n=_(this,l);_(this,c)&&_(this,c).destroy(),Object.keys(_(this,d)).forEach(function(e){n.removeEventListener(e,_(t,d)[e])}),_(this,h)&&!_(this,m)&&S.isVideo(_(this,l))&&n.removeEventListener("canplay",this._autoplay.bind(this)),_(this,r)&&_(this,r).destroy(),S.isVideo(_(this,l))&&(S.removeElement(this.playBtn),S.removeElement(this.loader)),n.controls=!0,n.setAttribute("id",_(this,o)),n.removeAttribute("op-live__enabled"),n.removeAttribute("op-dvr__enabled");var e=n.parentElement;e&&e.parentNode&&e.parentNode.replaceChild(n,e);var i=T.addEvent("playerdestroyed");n.dispatchEvent(i)}},{key:"getContainer",value:function(){return _(this,l).parentElement||_(this,l)}},{key:"getControls",value:function(){return _(this,r)}},{key:"getCustomControls",value:function(){return _(this,g)}},{key:"getElement",value:function(){return _(this,l)}},{key:"getEvents",value:function(){return _(this,d)}},{key:"getOptions",value:function(){return _(this,y)}},{key:"activeElement",value:function(){return _(this,a)&&_(this,a).started()?_(this,a):_(this,c)}},{key:"isMedia",value:function(){return this.activeElement()instanceof w.default}},{key:"isAd",value:function(){return this.activeElement()instanceof A.default}},{key:"getMedia",value:function(){return _(this,c)}},{key:"getAd",value:function(){return _(this,a)}},{key:"addCaptions",value:function(e){if(e.default)for(var t=_(this,l).querySelectorAll("track"),n=0,i=t.length;n<i;n++)t[n].default=!1;var r=_(this,l),s=r.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));s?(s.src=e.src,s.label=e.label,s.default=e.default||!1):((s=document.createElement("track")).srclang=e.srclang,s.src=e.src,s.kind=e.kind,s.label=e.label,s.default=e.default||!1,r.appendChild(s));var a=T.addEvent("controlschanged");r.dispatchEvent(a)}},{key:"addControl",value:function(e){e.custom=!0,_(this,g).push(e);var t=T.addEvent("controlschanged");_(this,l).dispatchEvent(t)}},{key:"removeControl",value:function(i){var n=this,r=this.getOptions().controls.layers;Object.keys(r).forEach(function(n){r[n].forEach(function(e,t){e===i&&r[n].splice(t,1)})}),_(this,g).forEach(function(e,t){e.id===i&&_(n,g).splice(t,1)});var e=T.addEvent("controlschanged");_(this,l).dispatchEvent(e)}},{key:"_prepareMedia",value:function(){try{_(this,l).addEventListener("playererror",_(this,y).onError,O.EVENT_OPTIONS),_(this,h)&&S.isVideo(_(this,l))&&_(this,l).addEventListener("canplay",this._autoplay.bind(this),O.EVENT_OPTIONS),E(this,c,new w.default(_(this,l),_(this,y),_(this,h),s.customMedia));var e=_(this,l).getAttribute("preload");if(!_(this,u)&&e&&"none"===e||(_(this,c).load(),_(this,c).loaded=!0),!_(this,h)&&_(this,u)){var t=_(this,y)&&_(this,y).ads?_(this,y).ads:void 0;E(this,a,new A.default(this,_(this,u),!1,!1,t))}}catch(e){}}},{key:"enableDefaultPlayer",value:function(){var e=this,t=!0,n=0;this.proxy&&!this.proxy.paused&&(t=!1,n=this.proxy.currentTime,this.proxy.pause()),(this.proxy=this).getElement().addEventListener("loadedmetadata",function(){e.getMedia().currentTime=n,t||e.play()})}},{key:"_isValid",value:function(){var e=_(this,l);return e instanceof HTMLElement!=!1&&(!(!S.isAudio(e)&&!S.isVideo(e))&&!!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");if(e.className="op-player op-player__keyboard--inactive",e.className+=S.isAudio(_(this,l))?" op-player__audio":" op-player__video",e.tabIndex=0,_(this,l).classList.remove("op-player"),_(this,l).parentElement&&_(this,l).parentElement.insertBefore(e,_(this,l)),e.appendChild(_(this,l)),e.addEventListener("keydown",function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")},O.EVENT_OPTIONS),e.addEventListener("click",function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")},O.EVENT_OPTIONS),"fill"!==_(this,y).mode||S.isAudio(_(this,l))||O.IS_IPHONE)if("fit"!==_(this,y).mode||S.isAudio(_(this,l))){var t="";if(_(this,y).width){var n="number"==typeof _(this,y).width?"".concat(_(this,y).width,"px"):_(this,y).width;t+="width: ".concat(n," !important;")}if(_(this,y).height){var i="number"==typeof _(this,y).height?"".concat(_(this,y).height,"px"):_(this,y).height;t+="height: ".concat(i," !important;")}t&&e.setAttribute("style",t)}else{var r=this.getContainer();if(r.parentElement){var s=document.createElement("div");s.className="op-player__fit--wrapper",s.tabIndex=0,r.parentElement.insertBefore(s,r),s.appendChild(r),r.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){O.IS_IPHONE&&S.isVideo(_(this,l))&&this.getContainer().classList.add("op-player__ios--iphone"),E(this,r,new k.default(this)),_(this,r).create()}},{key:"_createUID",value:function(){if(_(this,l).id)E(this,o,_(this,l).id),_(this,l).removeAttribute("id");else{for(var e;e="op_".concat(Math.random().toString(36).substr(2,9)),void 0!==s.instances[e];);E(this,o,e)}_(this,l).parentElement&&(_(this,l).parentElement.id=_(this,o))}},{key:"_createPlayButton",value:function(){var e=this;S.isAudio(_(this,l))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=_(this,y).labels.play,this.playBtn.innerHTML="<span>".concat(_(this,y).labels.play,"</span>"),locationSearch.get("ticket")||(this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false")),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),_(this,l).parentElement&&(_(this,l).parentElement.insertBefore(this.loader,_(this,l)),_(this,l).parentElement.insertBefore(this.playBtn,_(this,l))),this.playBtn.addEventListener("click",function(){locationSearch.get("ticket")||(_(e,a)&&(_(e,a).playRequested=e.activeElement().paused),e.activeElement().paused?e.activeElement().play():e.activeElement().pause())},O.EVENT_OPTIONS))}},{key:"_setEvents",value:function(){var t=this;S.isVideo(_(this,l))&&(_(this,d).loadedmetadata=function(){var e=t.activeElement();!_(t,y).showLoaderOnInit||O.IS_IOS||O.IS_ANDROID?(t.loader.setAttribute("aria-hidden","true"),t.playBtn.setAttribute("aria-hidden","false")):(t.loader.setAttribute("aria-hidden","false"),t.playBtn.setAttribute("aria-hidden","true")),e.paused&&(t.playBtn.classList.remove("op-player__play--paused"),locationSearch.get("ticket")||t.playBtn.setAttribute("aria-pressed","false"))},_(this,d).waiting=function(){t.playBtn.setAttribute("aria-hidden","true"),t.loader.setAttribute("aria-hidden","false")},_(this,d).seeking=function(){var e=t.activeElement();t.playBtn.setAttribute("aria-hidden","true"),t.loader.setAttribute("aria-hidden",e instanceof w.default?"false":"true")},_(this,d).seeked=function(){var e=t.activeElement();0===Math.round(e.currentTime)?(t.playBtn.setAttribute("aria-hidden","true"),t.loader.setAttribute("aria-hidden","false")):(t.playBtn.setAttribute("aria-hidden",e instanceof w.default?"false":"true"),t.loader.setAttribute("aria-hidden","true"))},_(this,d).play=function(){t.playBtn.classList.add("op-player__play--paused"),t.playBtn.title=_(t,y).labels.pause,t.loader.setAttribute("aria-hidden","true"),_(t,y).showLoaderOnInit?t.playBtn.setAttribute("aria-hidden","true"):setTimeout(function(){t.playBtn.setAttribute("aria-hidden","true")},_(t,y).hidePlayBtnTimer)},_(this,d).playing=function(){t.loader.setAttribute("aria-hidden","true"),t.playBtn.setAttribute("aria-hidden","true")},_(this,d).pause=function(){var e=t.activeElement();t.playBtn.classList.remove("op-player__play--paused"),t.playBtn.title=_(t,y).labels.play,_(t,y).showLoaderOnInit&&0===Math.round(e.currentTime)?(t.playBtn.setAttribute("aria-hidden","true"),locationSearch.get("ticket")||t.loader.setAttribute("aria-hidden","false")):(t.playBtn.setAttribute("aria-hidden","false"),t.loader.setAttribute("aria-hidden","true"))},_(this,d).ended=function(){t.loader.setAttribute("aria-hidden","true"),t.playBtn.setAttribute("aria-hidden","true")}),Object.keys(_(this,d)).forEach(function(e){_(t,l).addEventListener(e,_(t,d)[e],O.EVENT_OPTIONS)})}},{key:"_autoplay",value:function(){var s=this;_(this,m)||(E(this,m,!0),_(this,l).removeEventListener("canplay",this._autoplay.bind(this)),L.isAutoplaySupported(_(this,l),_(this,f),function(e){E(s,p,e)},function(e){E(s,v,e)},function(){if(_(s,v)){s.activeElement().muted=!0,s.activeElement().volume=0;var e=T.addEvent("volumechange");_(s,l).dispatchEvent(e);var t=document.createElement("div"),n=O.IS_IOS||O.IS_ANDROID?_(s,y).labels.tap:_(s,y).labels.click;t.className="op-player__unmute",t.id="op-player__unmute",t.innerHTML="<span>".concat(n,"</span>"),t.tabIndex=0,t.addEventListener("click",function(){s.activeElement().muted=!1,s.activeElement().volume=_(s,f);var e=T.addEvent("volumechange");_(s,l).dispatchEvent(e),S.removeElement(t)},O.EVENT_OPTIONS);var i=s.getContainer();i.insertBefore(t,i.firstChild)}else s.activeElement().muted=_(s,l).muted,s.activeElement().volume=_(s,f);if(_(s,u)){var r=_(s,y)&&_(s,y).ads?_(s,y).ads:void 0;E(s,a,new A.default(s,_(s,u),_(s,p),_(s,v),r))}else if(_(s,p)||_(s,v))return s.play()}))}},{key:"_mergeOptions",value:function(t){var n=this;if(E(this,y,Object.assign(Object.assign({},_(this,b)),t)),t){["labels","controls"].forEach(function(e){_(n,y)[e]=t[e]&&Object.keys(t[e]).length?Object.assign(Object.assign({},_(n,b)[e]),t[e]):_(n,b)[e]})}}},{key:"src",set:function(e){_(this,c)instanceof w.default&&(_(this,c).mediaFiles=[],_(this,c).src=e)},get:function(){return _(this,c).src}},{key:"id",get:function(){return _(this,o)}}])&&i(e.prototype,t),n&&i(e,n),s}();r=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,M.instances={},M.customMedia={media:{},optionsKey:{},rules:[]},t.default=M,"undefined"!=typeof window&&(window.OpenPlayer=M,(window.OpenPlayerJS=M).init())},function(e,t,n){var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);t.f=s?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(11),r=n(5),s=n(35);e.exports=!i&&!r(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(19),r=n(38);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:i?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var a=n(8),o=n(24),l=n(87).indexOf,u=n(40);e.exports=function(e,t){var n,i=o(e),r=0,s=[];for(n in i)!a(u,n)&&a(i,n)&&s.push(n);for(;t.length>r;)a(i,n=t[r++])&&(~l(s,n)||s.push(n));return s}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(5),r=/#|\.prototype\./,s=function(e,t){var n=o[a(e)];return n==u||n!=l&&("function"==typeof t?i(t):!!t)},a=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},o=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},function(e,t,n){var i=n(61),r=n(5);e.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())||!Symbol.sham&&i&&i<41})},function(e,t,n){var i,r,s=n(0),a=n(43),o=s.process,l=o&&o.versions,u=l&&l.v8;u?r=(i=u.split("."))[0]<4?1:i[0]+i[1]:a&&(!(i=a.match(/Edge\/(\d+)/))||74<=i[1])&&(i=a.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},function(e,t,n){var i=n(3),r=n(44),s=n(12),a=i("unscopables"),o=Array.prototype;null==o[a]&&s.f(o,a,{configurable:!0,value:r(null)}),e.exports=function(e){o[a][e]=!0}},function(e,t,n){var i=n(13);e.exports=i("document","documentElement")},function(e,t,n){var r=n(97).charAt,i=n(26),s=n(65),a="String Iterator",o=i.set,l=i.getterFor(a);s(String,"String",function(e){o(this,{type:a,string:String(e),index:0})},function(){var e,t=l(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})})},function(e,t,n){var y=n(4),g=n(98),b=n(46),E=n(48),_=n(47),k=n(10),w=n(16),i=n(3),A=n(19),O=n(22),r=n(66),T=r.IteratorPrototype,S=r.BUGGY_SAFARI_ITERATORS,L=i("iterator"),M="values",P="entries",N=function(){return this};e.exports=function(e,t,n,i,r,s,a){g(n,t,i);var o,l,u,c=function(e){if(e===r&&v)return v;if(!S&&e in f)return f[e];switch(e){case"keys":case M:case P:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,f=e.prototype,p=f[L]||f["@@iterator"]||r&&f[r],v=!S&&p||c(r),m="Array"==t&&f.entries||p;if(m&&(o=b(m.call(new e)),T!==Object.prototype&&o.next&&(A||b(o)===T||(E?E(o,T):"function"!=typeof o[L]&&k(o,L,N)),_(o,d,!0,!0),A&&(O[d]=N))),r==M&&p&&p.name!==M&&(h=!0,v=function(){return p.call(this)}),A&&!a||f[L]===v||k(f,L,v),O[t]=v,r)if(l={values:c(M),keys:s?v:c("keys"),entries:c(P)},a)for(u in l)!S&&!h&&u in f||w(f,u,l[u]);else y({target:t,proto:!0,forced:S||h},l);return l}},function(e,t,n){var i,r,s,a=n(5),o=n(46),l=n(10),u=n(8),c=n(3),d=n(19),h=c("iterator"),f=!1;[].keys&&("next"in(s=[].keys())?(r=o(o(s)))!==Object.prototype&&(i=r):f=!0);var p=null==i||a(function(){var e={};return i[h].call(e)!==e});p&&(i={}),d&&!p||u(i,h)||l(i,h,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var i=n(7);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},function(e,t,n){var i=n(3),r=n(22),s=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[s]===e)}},function(e,t,n){var i=n(70),r=n(22),s=n(3)("iterator");e.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i=n(49),r=n(25),s=n(3)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var r=n(3)("iterator"),s=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){s=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){var i=n(4),r=n(46),s=n(48),a=n(44),o=n(10),l=n(18),u=n(28),c=function(e,t){var n=this;if(!(n instanceof c))return new c(e,t);s&&(n=s(new Error(void 0),r(n))),void 0!==t&&o(n,"message",String(t));var i=[];return u(e,i.push,{that:i}),o(n,"errors",i),n};c.prototype=a(Error.prototype,{constructor:l(5,c),message:l(5,""),name:l(5,"AggregateError")}),i({global:!0},{AggregateError:c})},function(e,t,n){var i=n(0);e.exports=i.Promise},function(e,t,n){var r=n(7),s=n(17),a=n(3)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[a])?t:s(n)}},function(e,t,n){var i,r,s,a=n(0),o=n(5),l=n(21),u=n(63),c=n(35),d=n(76),h=n(50),f=a.location,p=a.setImmediate,v=a.clearImmediate,m=a.process,y=a.MessageChannel,g=a.Dispatch,b=0,E={},_="onreadystatechange",k=function(e){if(E.hasOwnProperty(e)){var t=E[e];delete E[e],t()}},w=function(e){return function(){k(e)}},A=function(e){k(e.data)},O=function(e){a.postMessage(e+"",f.protocol+"//"+f.host)};p&&v||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return E[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},v=function(e){delete E[e]},h?i=function(e){m.nextTick(w(e))}:g&&g.now?i=function(e){g.now(w(e))}:y&&!d?(s=(r=new y).port2,r.port1.onmessage=A,i=l(s.postMessage,s,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&f&&"file:"!==f.protocol&&!o(O)?(i=O,a.addEventListener("message",A,!1)):i=_ in c("script")?function(e){u.appendChild(c("script"))[_]=function(){u.removeChild(this),k(e)}}:function(e){setTimeout(w(e),0)}),e.exports={set:p,clear:v}},function(e,t,n){var i=n(43);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,n){var i=n(7),r=n(9),s=n(23);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(4),u=n(17),r=n(23),s=n(29),c=n(28);i({target:"Promise",stat:!0},{allSettled:function(e){var o=this,t=r.f(o),l=t.resolve,n=t.reject,i=s(function(){var i=u(o.resolve),r=[],s=0,a=1;c(e,function(e){var t=s++,n=!1;r.push(void 0),a++,i.call(o,e).then(function(e){n||(n=!0,r[t]={status:"fulfilled",value:e},--a||l(r))},function(e){n||(n=!0,r[t]={status:"rejected",reason:e},--a||l(r))})}),--a||l(r)});return i.error&&n(i.value),t.promise}})},function(e,t,n){var i=n(4),d=n(17),h=n(13),r=n(23),s=n(29),f=n(28),p="No one promise resolved";i({target:"Promise",stat:!0},{any:function(e){var l=this,t=r.f(l),u=t.resolve,c=t.reject,n=s(function(){var i=d(l.resolve),r=[],s=0,a=1,o=!1;f(e,function(e){var t=s++,n=!1;r.push(void 0),a++,i.call(l,e).then(function(e){n||o||(o=!0,u(e))},function(e){n||o||(n=!0,r[t]=e,--a||c(new(h("AggregateError"))(r,p)))})}),--a||c(new(h("AggregateError"))(r,p))});return n.error&&c(n.value),t.promise}})},function(e,t,n){var i=n(81);e.exports=i},function(e,t,n){n(82);var i=n(94);e.exports=i("Array","find")},function(e,t,n){var i=n(4),r=n(89).find,s=n(62),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),i({target:"Array",proto:!0,forced:o},{find:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),s(a)},function(e,t,n){var i=n(0),r=n(37),s=i.WeakMap;e.exports="function"==typeof s&&/native code/.test(r(s))},function(e,t,n){var o=n(8),l=n(85),u=n(31),c=n(12);e.exports=function(e,t){for(var n=l(t),i=c.f,r=u.f,s=0;s<n.length;s++){var a=n[s];o(e,a)||i(e,a,r(t,a))}}},function(e,t,n){var i=n(13),r=n(86),s=n(58),a=n(7);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(a(e)),n=s.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(57),r=n(42).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var l=n(24),u=n(27),c=n(88),i=function(o){return function(e,t,n){var i,r=l(e),s=u(r.length),a=c(n,s);if(o&&t!=t){for(;a<s;)if((i=r[a++])!=i)return!0}else for(;a<s;a++)if((o||a in r)&&r[a]===t)return o||a||0;return!o&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},function(e,t,n){var i=n(41),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},function(e,t,n){var _=n(21),k=n(32),w=n(15),A=n(27),O=n(90),T=[].push,i=function(f){var p=1==f,v=2==f,m=3==f,y=4==f,g=6==f,b=7==f,E=5==f||g;return function(e,t,n,i){for(var r,s,a=w(e),o=k(a),l=_(t,n,3),u=A(o.length),c=0,d=i||O,h=p?d(e,u):v||b?d(e,0):void 0;c<u;c++)if((E||c in o)&&(s=l(r=o[c],c,a),f))if(p)h[c]=s;else if(s)switch(f){case 3:return!0;case 5:return r;case 6:return c;case 2:T.call(h,r)}else switch(f){case 4:return!1;case 7:T.call(h,r)}return g?-1:m||y?y:h}};e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6),filterOut:i(7)}},function(e,t,n){var i=n(9),r=n(91),s=n(3)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[s])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(25);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(60);e.exports=i&&!Symbol.sham&&"symbol"==_typeof2(Symbol.iterator)},function(e,t,n){var i=n(11),a=n(12),o=n(7),l=n(45);e.exports=i?Object.defineProperties:function(e,t){o(e);for(var n,i=l(t),r=i.length,s=0;s<r;)a.f(e,n=i[s++],t[n]);return e}},function(e,t,n){var i=n(0),r=n(21),s=Function.call;e.exports=function(e,t,n){return r(s,i[e].prototype[t],n)}},function(e,t,n){var i=n(96);e.exports=i},function(e,t,n){n(64),n(101);var i=n(20);e.exports=i.Array.from},function(e,t,n){var l=n(41),u=n(33),i=function(o){return function(e,t){var n,i,r=String(u(e)),s=l(t),a=r.length;return s<0||a<=s?o?"":void 0:(n=r.charCodeAt(s))<55296||56319<n||s+1===a||(i=r.charCodeAt(s+1))<56320||57343<i?o?r.charAt(s):n:o?r.slice(s,s+2):i-56320+(n-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){var r=n(66).IteratorPrototype,s=n(44),a=n(18),o=n(47),l=n(22),u=function(){return this};e.exports=function(e,t,n){var i=t+" Iterator";return e.prototype=s(r,{next:a(1,n)}),o(e,i,!1,!0),l[i]=u,e}},function(e,t,n){var i=n(5);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var i=n(9);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i=n(4),r=n(102);i({target:"Array",stat:!0,forced:!n(71)(function(e){Array.from(e)})},{from:r})},function(e,t,n){var p=n(21),v=n(15),m=n(103),y=n(68),g=n(27),b=n(104),E=n(69);e.exports=function(e){var t,n,i,r,s,a,o=v(e),l="function"==typeof this?this:Array,u=arguments.length,c=1<u?arguments[1]:void 0,d=void 0!==c,h=E(o),f=0;if(d&&(c=p(c,2<u?arguments[2]:void 0,2)),null==h||l==Array&&y(h))for(n=new l(t=g(o.length));f<t;f++)a=d?c(o[f],f):o[f],b(n,f,a);else for(s=(r=h.call(o)).next,n=new l;!(i=s.call(r)).done;f++)a=d?m(r,c,[i.value,f],!0):i.value,b(n,f,a);return n.length=f,n}},function(e,t,n){var r=n(7),s=n(67);e.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){throw s(t),e}}},function(e,t,n){var r=n(34),s=n(12),a=n(18);e.exports=function(e,t,n){var i=r(t);i in e?s.f(e,i,a(0,n)):e[i]=n}},function(e,t,n){var i=n(106);e.exports=i},function(e,t,n){n(107);var i=n(20);e.exports=i.Object.assign},function(e,t,n){var i=n(4),r=n(108);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){var h=n(11),i=n(5),f=n(45),p=n(58),v=n(53),m=n(15),y=n(32),r=Object.assign,s=Object.defineProperty;e.exports=!r||i(function(){if(h&&1!==r({b:1},r(s({},"a",{enumerable:!0,get:function(){s(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=r({},e)[n]||f(r({},t)).join("")!=i})?function(e,t){for(var n=m(e),i=arguments.length,r=1,s=p.f,a=v.f;r<i;)for(var o,l=y(arguments[r++]),u=s?f(l).concat(s(l)):f(l),c=u.length,d=0;d<c;)o=u[d++],h&&!a.call(l,o)||(n[o]=l[o]);return n}:r},function(e,t,n){var i=n(110);e.exports=i},function(e,t,n){n(111);var i=n(20);e.exports=i.Object.keys},function(e,t,n){var i=n(4),r=n(15),s=n(45);i({target:"Object",stat:!0,forced:n(5)(function(){s(1)})},{keys:function(e){return s(r(e))}})},function(e,t,n){var i=n(113);n(128),n(129),n(130),n(131),e.exports=i},function(e,t,n){n(72),n(114),n(116),n(78),n(79),n(124),n(64),n(125);var i=n(20);e.exports=i.Promise},function(e,t,n){var i=n(49),r=n(16),s=n(115);i||r(Object.prototype,"toString",s,{unsafe:!0})},function(e,t,n){var i=n(49),r=n(70);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){var i,r,s,a,o=n(4),l=n(19),u=n(0),c=n(13),d=n(73),h=n(16),f=n(117),p=n(48),v=n(47),m=n(118),y=n(9),g=n(17),b=n(119),E=n(37),_=n(28),k=n(71),w=n(74),A=n(75).set,O=n(120),T=n(77),S=n(122),L=n(23),M=n(29),P=n(26),N=n(59),I=n(3),C=n(123),x=n(50),j=n(61),D=I("species"),R="Promise",W=P.get,V=P.set,F=P.getterFor(R),H=d&&d.prototype,q=d,B=H,U=u.TypeError,z=u.document,G=u.process,K=L.f,X=K,Q=!!(z&&z.createEvent&&u.dispatchEvent),$="function"==typeof PromiseRejectionEvent,J="unhandledrejection",Y=!1,Z=N(R,function(){var e=E(q)!==String(q);if(!e&&66===j)return!0;if(l&&!B.finally)return!0;if(51<=j&&/native code/.test(q))return!1;var t=new q(function(e){e(1)}),n=function(e){e(function(){},function(){})};return(t.constructor={})[D]=n,!(Y=t.then(function(){})instanceof n)||!e&&C&&!$}),ee=Z||!k(function(e){q.all(e).catch(function(){})}),te=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},ne=function(d,h){if(!d.notified){d.notified=!0;var f=d.reactions;O(function(){for(var e=d.value,t=1==d.state,n=0;f.length>n;){var i,r,s,a=f[n++],o=t?a.ok:a.fail,l=a.resolve,u=a.reject,c=a.domain;try{o?(t||(2===d.rejection&&ae(d),d.rejection=1),!0===o?i=e:(c&&c.enter(),i=o(e),c&&(c.exit(),s=!0)),i===a.promise?u(U("Promise-chain cycle")):(r=te(i))?r.call(i,l,u):l(i)):u(e)}catch(e){c&&!s&&c.exit(),u(e)}}d.reactions=[],d.notified=!1,h&&!d.rejection&&re(d)})}},ie=function(e,t,n){var i,r;Q?((i=z.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),u.dispatchEvent(i)):i={promise:t,reason:n},!$&&(r=u["on"+e])?r(i):e===J&&S("Unhandled promise rejection",n)},re=function(i){A.call(u,function(){var e,t=i.facade,n=i.value;if(se(i)&&(e=M(function(){x?G.emit("unhandledRejection",n,t):ie(J,t,n)}),i.rejection=x||se(i)?2:1,e.error))throw e.value})},se=function(e){return 1!==e.rejection&&!e.parent},ae=function(t){A.call(u,function(){var e=t.facade;x?G.emit("rejectionHandled",e):ie("rejectionhandled",e,t.value)})},oe=function(t,n,i){return function(e){t(n,e,i)}},le=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ne(e,!0))},ue=function e(n,i,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===i)throw U("Promise can't be resolved itself");var r=te(i);r?O(function(){var t={done:!1};try{r.call(i,oe(e,t,n),oe(le,t,n))}catch(e){le(t,e,n)}}):(n.value=i,n.state=1,ne(n,!1))}catch(e){le({done:!1},e,n)}}};if(Z&&(B=(q=function(e){b(this,q,R),g(e),i.call(this);var t=W(this);try{e(oe(ue,t),oe(le,t))}catch(e){le(t,e)}}).prototype,(i=function(e){V(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(B,{then:function(e,t){var n=F(this),i=K(w(this,q));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=x?G.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&ne(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=W(e);this.promise=e,this.resolve=oe(ue,t),this.reject=oe(le,t)},L.f=K=function(e){return e===q||e===s?new r(e):X(e)},!l&&"function"==typeof d&&H!==Object.prototype)){a=H.then,Y||(h(H,"then",function(e,t){var n=this;return new q(function(e,t){a.call(n,e,t)}).then(e,t)},{unsafe:!0}),h(H,"catch",B.catch,{unsafe:!0}));try{delete H.constructor}catch(e){}p&&p(H,B)}o({global:!0,wrap:!0,forced:Z},{Promise:q}),v(q,R,!1,!0),m(R),s=c(R),o({target:R,stat:!0,forced:Z},{reject:function(e){var t=K(this);return t.reject.call(void 0,e),t.promise}}),o({target:R,stat:!0,forced:l||Z},{resolve:function(e){return T(l&&this===s?q:this,e)}}),o({target:R,stat:!0,forced:ee},{all:function(e){var o=this,t=K(o),l=t.resolve,u=t.reject,n=M(function(){var i=g(o.resolve),r=[],s=0,a=1;_(e,function(e){var t=s++,n=!1;r.push(void 0),a++,i.call(o,e).then(function(e){n||(n=!0,r[t]=e,--a||l(r))},u)}),--a||l(r)});return n.error&&u(n.value),t.promise},race:function(e){var n=this,i=K(n),r=i.reject,t=M(function(){var t=g(n.resolve);_(e,function(e){t.call(n,e).then(i.resolve,r)})});return t.error&&r(t.value),i.promise}})},function(e,t,n){var r=n(16);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var i=n(13),r=n(12),s=n(3),a=n(11),o=s("species");e.exports=function(e){var t=i(e),n=r.f;a&&t&&!t[o]&&n(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i,r,s,a,o,l,u,c,d=n(0),h=n(31).f,f=n(75).set,p=n(76),v=n(121),m=n(50),y=d.MutationObserver||d.WebKitMutationObserver,g=d.document,b=d.process,E=d.Promise,_=h(d,"queueMicrotask"),k=_&&_.value;k||(i=function(){var e,t;for(m&&(e=b.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?a():s=void 0,e}}s=void 0,e&&e.enter()},a=p||m||v||!y||!g?E&&E.resolve?((u=E.resolve(void 0)).constructor=E,c=u.then,function(){c.call(u,i)}):m?function(){b.nextTick(i)}:function(){f.call(d,i)}:(o=!0,l=g.createTextNode(""),new y(i).observe(l,{characterData:!0}),function(){l.data=o=!o})),e.exports=k||function(e){var t={fn:e,next:void 0};s&&(s.next=t),r||(r=t,a()),s=t}},function(e,t,n){var i=n(43);e.exports=/web0s(?!.*chrome)/i.test(i)},function(e,t,n){var i=n(0);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports="object"==("undefined"==typeof window?"undefined":_typeof2(window))},function(e,t,n){var i=n(4),r=n(19),s=n(73),a=n(5),o=n(13),l=n(74),u=n(77),c=n(16);if(i({target:"Promise",proto:!0,real:!0,forced:!!s&&a(function(){s.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var n=l(this,o("Promise")),e="function"==typeof t;return this.then(e?function(e){return u(n,t()).then(function(){return e})}:t,e?function(e){return u(n,t()).then(function(){throw e})}:t)}}),!r&&"function"==typeof s){var d=o("Promise").prototype.finally;s.prototype.finally!==d&&c(s.prototype,"finally",d,{unsafe:!0})}},function(e,t,n){var i=n(0),r=n(126),s=n(127),a=n(10),o=n(3),l=o("iterator"),u=o("toStringTag"),c=s.values;for(var d in r){var h=i[d],f=h&&h.prototype;if(f){if(f[l]!==c)try{a(f,l,c)}catch(e){f[l]=c}if(f[u]||a(f,u,d),r[d])for(var p in s)if(f[p]!==s[p])try{a(f,p,s[p])}catch(e){f[p]=s[p]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var i=n(24),r=n(62),s=n(22),a=n(26),o=n(65),l="Array Iterator",u=a.set,c=a.getterFor(l);e.exports=o(Array,"Array",function(e,t){u(this,{type:l,target:i(e),index:0,kind:t})},function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},function(e,t,n){n(72)},function(e,t,n){n(78)},function(e,t,n){var i=n(4),r=n(23),s=n(29);i({target:"Promise",stat:!0},{try:function(e){var t=r.f(this),n=s(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})},function(e,t,n){n(79)},function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}()},function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(134));"undefined"!=typeof window&&r.default(window)},function(e,t,n){n.r(t),t.default=function(e){var t=e.Element.prototype;"function"!=typeof t.matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),"function"!=typeof t.closest&&(t.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}},function(e,t,n){function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p,s,v,m,y,g,b=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},E=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(136)),l=a(n(137)),u=a(n(138)),c=a(n(139)),d=a(n(140)),h=a(n(141)),_=a(n(142)),k=a(n(143)),w=a(n(150)),A=n(1),O=n(6),T=n(2),S=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={media:{},mouse:{}},p.set(this,void 0),s.set(this,0),v.set(this,void 0),m.set(this,void 0),y.set(this,void 0),g.set(this,{Captions:o.default,Fullscreen:l.default,Levels:u.default,Play:c.default,AudioLevels:w.default,Progress:d.default,Settings:h.default,Time:_.default,Volume:k.default}),b(this,m,e),this._setElements(),this}var e,n,i;return e=t,(n=[{key:"create",value:function(){var t=this;E(this,m).getElement().controls=!1;var e=T.isVideo(E(this,m).getElement());this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){t.destroy(),t._setElements(),t.create()},this.events.ended=function(){E(t,m).getContainer().classList.remove("op-controls--hidden")},E(this,m).getElement().addEventListener("controlschanged",this.events.controlschanged,A.EVENT_OPTIONS),E(this,m).getElement().addEventListener("ended",this.events.ended,A.EVENT_OPTIONS);E(this,m).getOptions().controls.alwaysVisible;this.events.mouse.mouseenter=function(){e&&!E(t,m).activeElement().paused&&(t._stopControlTimer(),E(t,m).activeElement().currentTime?(E(t,m).playBtn.setAttribute("aria-hidden",E(t,m).isMedia()?"false":"true"),E(t,m).loader.setAttribute("aria-hidden","true")):E(t,m).getOptions().showLoaderOnInit&&(E(t,m).playBtn.setAttribute("aria-hidden","true"),E(t,m).loader.setAttribute("aria-hidden","false")),E(t,m).getContainer().classList.remove("op-controls--hidden"),t._startControlTimer(2500))},this.events.mouse.mousemove=function(){e&&(E(t,m).activeElement().currentTime?(E(t,m).loader.setAttribute("aria-hidden","true"),E(t,m).playBtn.setAttribute("aria-hidden",E(t,m).isMedia()?"false":"true")):(E(t,m).playBtn.setAttribute("aria-hidden",E(t,m).getOptions().showLoaderOnInit?"true":"false"),E(t,m).loader.setAttribute("aria-hidden",E(t,m).getOptions().showLoaderOnInit?"false":"true")),E(t,m).getContainer().classList.remove("op-controls--hidden"),t._startControlTimer(2500))},this.events.mouse.mouseleave=function(){e&&!E(t,m).activeElement().paused&&t._startControlTimer(1e3)},this.events.media.play=function(){e&&t._startControlTimer(E(t,m).getOptions().hidePlayBtnTimer)},this.events.media.pause=function(){E(t,m).getContainer().classList.remove("op-controls--hidden"),t._stopControlTimer()},Object.keys(this.events.media).forEach(function(e){E(t,m).getElement().addEventListener(e,t.events.media[e],A.EVENT_OPTIONS)}),Object.keys(this.events.mouse).forEach(function(e){E(t,m).getContainer().addEventListener(e,t.events.mouse[e],A.EVENT_OPTIONS)}),this._startControlTimer(3e3)}},{key:"destroy",value:function(){var t=this;A.IS_ANDROID||A.IS_IOS||(Object.keys(this.events.mouse).forEach(function(e){E(t,m).getContainer().removeEventListener(e,t.events.mouse[e])}),Object.keys(this.events.media).forEach(function(e){E(t,m).getElement().removeEventListener(e,t.events.media[e])}),this._stopControlTimer()),E(this,m).getElement().removeEventListener("controlschanged",this.events.controlschanged),E(this,m).getElement().removeEventListener("ended",this.events.ended),Object.keys(E(this,y)).forEach(function(e){E(t,y)[e].forEach(function(e){e.custom?t._destroyCustomControl(e):"function"==typeof e.destroy&&e.destroy()})}),T.removeElement(E(this,v))}},{key:"getContainer",value:function(){return E(this,v)}},{key:"getLayer",value:function(e){return E(this,v).querySelector(".op-controls-layer__".concat(e))||E(this,v)}},{key:"_createControlsLayer",value:function(){E(this,v)&&E(this,m).getContainer().querySelector(".op-controls")||(b(this,v,document.createElement("div")),E(this,v).className="op-controls",E(this,m).getContainer().appendChild(E(this,v)))}},{key:"_startControlTimer",value:function(e){var t=this,n=E(this,m).activeElement();this._stopControlTimer(),"undefined"!=typeof window&&b(this,s,window.setTimeout(function(){if((!n.paused||!n.ended)&&T.isVideo(E(t,m).getElement())){E(t,m).getContainer().classList.add("op-controls--hidden"),E(t,m).playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=O.addEvent("controlshidden");E(t,m).getElement().dispatchEvent(e)}},e))}},{key:"_stopControlTimer",value:function(){0!==E(this,s)&&(clearTimeout(E(this,s)),b(this,s,0))}},{key:"_setElements",value:function(){var l=this,u=E(this,m).getOptions().controls.layers;b(this,y,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]});var c=T.isVideo(E(this,m).getElement()),d=T.isAudio(E(this,m).getElement()),e=Object.keys(u),h=e.find(function(e){return/^(top|bottom)/.test(e)});this._createControlsLayer(),e.forEach(function(r){var e=f(r.split("-"),2),s=e[0],a=e[1];if(a){E(l,v).classList.contains("op-controls__stacked")||E(l,v).classList.add("op-controls__stacked");var t="op-controls-layer__".concat(s);if(!E(l,v).querySelector(".".concat(t))){var n=document.createElement("div");n.className=t,E(l,v).appendChild(n)}}else if(h){var i="op-controls-layer__center";if(!E(l,v).querySelector(".".concat(i))){var o=document.createElement("div");o.className=i,E(l,v).appendChild(o)}}u[r].filter(function(e,t,n){return n.indexOf(e)===t}).forEach(function(e){var t=h&&!a?"center":s,n="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),i=new(E(l,g)[n])(E(l,m),a||s,t);"settings"===e&&b(l,p,i),(c||"fullscreen"!==e&&d)&&E(l,y)[r].push(i)})}),E(this,m).getCustomControls().forEach(function(e){var t=f(e.position.split("-"),2),n=t[0],i=t[1],r=h&&!i?"center":n;e.layer=r,e.position=i||n,"right"===e.position?E(l,y)[e.position].unshift(e):E(l,y)[e.position].push(e)})}},{key:"_buildElements",value:function(){var n=this;Object.keys(E(this,y)).forEach(function(e){E(n,y)[e].forEach(function(e){e.custom?n._createCustomControl(e):e.create()})}),Object.keys(E(this,y)).forEach(function(e){E(n,y)[e].forEach(function(e){if((!E(n,m).getOptions().detachMenus||e instanceof h.default)&&!e.custom&&"function"==typeof e.addSettings){var t=e.addSettings();E(n,p)&&Object.keys(t).length&&E(n,p).addItem(t.name,t.key,t.default,t.subitems,t.className)}})});var e=O.addEvent("controlschanged");E(this,v).dispatchEvent(e)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame(function(){e.setAttribute("aria-hidden","true")}))}},{key:"_toggleCustomMenu",value:function(e,t,n){E(this,m).getContainer().querySelectorAll(".op-settings").forEach(function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")}),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof n.click&&n.click(e)}},{key:"_createCustomControl",value:function(n){var t=this,e=document.createElement("button"),i=/\.(jpg|png|svg|gif)$/.test(n.icon)?'<img src="'.concat(n.icon,'">'):n.icon;if(e.className="op-controls__".concat(n.id," op-control__").concat(n.position," ").concat(n.showInAds?"":"op-control__hide-in-ad"),e.tabIndex=0,e.id=n.id,e.title=n.title,e.innerHTML=n.content||"".concat(i,' <span class="op-sr">').concat(n.title,"</span>"),n.subitems&&Array.isArray(n.subitems)&&0<n.subitems.length){var r=document.createElement("div");r.className="op-settings op-settings__custom",r.id="".concat(n.id,"-menu"),r.setAttribute("aria-hidden","true");var s=n.subitems.map(function(e){var t="";return e.icon&&(t=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(e.icon,'">'):e.icon),'<div class="op-settings__menu-item" tabindex="0" '.concat(e.title?'title="'.concat(e.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(e.id,'" data-value="').concat(n.id,"-").concat(e.id,'">').concat(t," ").concat(e.label,"</div>\n                </div>")});r.innerHTML='<div class="op-settings__menu" role="menu">'.concat(s.join(""),"</div>"),E(this,m).getContainer().appendChild(r),n.subitems.forEach(function(e){var t=r.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,A.EVENT_OPTIONS)}),e.addEventListener("click",function(e){return t._toggleCustomMenu(e,r,n)},A.EVENT_OPTIONS),E(this,m).getElement().addEventListener("controlshidden",function(){return t._hideCustomMenu(r)},A.EVENT_OPTIONS)}else n.click&&"function"==typeof n.click&&e.addEventListener("click",n.click,A.EVENT_OPTIONS);n.mouseenter&&"function"==typeof n.mouseenter&&e.addEventListener("mouseenter",n.mouseenter,A.EVENT_OPTIONS),n.mouseleave&&"function"==typeof n.mouseleave&&e.addEventListener("mouseenter",n.mouseleave,A.EVENT_OPTIONS),n.keydown&&"function"==typeof n.keydown&&e.addEventListener("keydown",n.keydown,A.EVENT_OPTIONS),n.blur&&"function"==typeof n.blur&&e.addEventListener("blur",n.blur,A.EVENT_OPTIONS),n.focus&&"function"==typeof n.focus&&e.addEventListener("focus",n.focus,A.EVENT_OPTIONS),n.layer&&("main"===n.layer?E(this,m).getContainer().appendChild(e):this.getLayer(n.layer).appendChild(e)),n.init&&"function"==typeof n.init&&n.init(E(this,m))}},{key:"_destroyCustomControl",value:function(t){var n=this,e=t.title.toLowerCase().replace(" ","-"),i=this.getContainer().querySelector(".op-controls__".concat(e));if(i){if(t.subitems&&Array.isArray(t.subitems)&&0<t.subitems.length){var r=E(this,m).getContainer().querySelector("#".concat(t.id,"-menu"));r&&(t.subitems.forEach(function(e){var t=r.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)}),i.removeEventListener("click",function(e){return n._toggleCustomMenu(e,r,t)}),E(this,m).getElement().removeEventListener("controlshidden",function(){return n._hideCustomMenu(r)}),T.removeElement(r))}t.click&&"function"==typeof t.click&&i.removeEventListener("click",t.click),t.mouseenter&&"function"==typeof t.mouseenter&&i.removeEventListener("mouseenter",t.mouseenter),t.mouseleave&&"function"==typeof t.mouseleave&&i.removeEventListener("mouseenter",t.mouseleave),t.keydown&&"function"==typeof t.keydown&&i.removeEventListener("keydown",t.keydown),t.blur&&"function"==typeof t.blur&&i.removeEventListener("blur",t.blur),t.focus&&"function"==typeof t.focus&&i.removeEventListener("focus",t.focus),T.removeElement(i),t.destroy&&"function"==typeof t.destroy&&t.destroy(E(this,m))}}}])&&r(e.prototype,n),i&&r(e,i),t}();p=new WeakMap,s=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,t.default=S},function(e,t,n){function h(e){return(h="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d,f,p,v,m,y,g,b,E,_,k,w,A,O,T,S=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},L=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),M=n(6),P=n(2),N=n(51),r=function(){function c(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),v.set(this,void 0),m.set(this,{button:{},global:{},media:{}}),y.set(this,{}),g.set(this,void 0),b.set(this,{}),E.set(this,void 0),_.set(this,void 0),k.set(this,"off"),w.set(this,void 0),A.set(this,void 0),O.set(this,void 0),T.set(this,void 0),S(this,d,e),S(this,A,e.getOptions().labels),S(this,w,e.getOptions().detachMenus),S(this,O,t),S(this,T,n);for(var i=L(this,d).getElement().textTracks,r=[],s=0,a=i.length;s<a;s++){var o=['track[kind="subtitles"][srclang="'.concat(i[s].language,'"][label="').concat(i[s].label,'"]'),'track[kind="captions"][srclang="'.concat(i[s].language,'"][label="').concat(i[s].label,'"]')];L(this,d).getElement().querySelector(o.join(", "))&&r.push(i[s])}if(!r.length)for(var l=0,u=i.length;l<u;l++)r.push(i[l]);return S(this,g,r),S(this,E,!!L(this,g).length),this}var e,t,n;return e=c,(t=[{key:"create",value:function(){var u=this;if(L(this,E)){S(this,f,document.createElement("button")),L(this,f).className="op-controls__captions op-control__".concat(L(this,O)),L(this,f).tabIndex=0,L(this,f).title=L(this,A).toggleCaptions,L(this,f).setAttribute("aria-controls",L(this,d).id),L(this,f).setAttribute("aria-pressed","false"),L(this,f).setAttribute("aria-label",L(this,A).toggleCaptions),L(this,f).setAttribute("data-active-captions","off"),L(this,f).innerHTML='<span class="op-sr">'.concat(L(this,A).toggleCaptions,"</span>"),L(this,w)&&(L(this,f).classList.add("op-control--no-hover"),S(this,v,document.createElement("div")),L(this,v).className="op-settings op-captions__menu",L(this,v).setAttribute("aria-hidden","true"),L(this,v).innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===L(this,k)?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(L(this,A).off,"</div>\n                </div>\n            </div>"));for(var e=function(n,e,t){var i=t[n];if("subtitles"===i.kind||"captions"===i.kind){i.default&&(S(u,k,i.srclang),L(u,f).setAttribute("data-active-captions",i.srclang));var r=P.getAbsoluteUrl(i.src),s=L(u,g)[n];s&&s.language===i.srclang&&(s.cues&&0<s.cues.length?(L(u,y)[i.srclang]=u._getNativeCues(L(u,g)[n]),u._prepareTrack(n,i.srclang,r,i.default||!1)):P.request(r,"text",function(e){if(L(u,y)[i.srclang]=u._getCuesFromText(e),u._prepareTrack(n,i.srclang,r,i.default||!1),L(u,v)&&!L(u,v).querySelector('.op-subtitles__option[data-value="captions-'.concat(L(u,g)[n].language,'"]'))){var t=document.createElement("div");t.className="op-settings__submenu-item",t.tabIndex=0,t.setAttribute("role","menuitemradio"),t.setAttribute("aria-checked",L(u,k)===L(u,g)[n].language?"true":"false"),t.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-'.concat(L(u,g)[n].language,'">\n                                        ').concat(L(u,A).lang[L(u,g)[n].language]||L(u,g)[n].label,"\n                                    </div>"),L(u,v).appendChild(t)}}))}},t=0,n=L(this,d).getElement().querySelectorAll("track"),i=n.length;t<i;t++)e(t,0,n);S(this,p,document.createElement("div")),L(this,p).className="op-captions",L(this,p).innerHTML="<span></span>";var r=L(this,p).querySelector("span");if(L(this,m).media.timeupdate=function(){if(L(u,d).isMedia())if(L(u,_)){var e=L(u,y)[L(u,_).language];if(r&&void 0!==e){var t=u._search(e,L(u,d).getMedia().currentTime);r.innerHTML="",-1<t&&P.hasClass(L(u,f),"op-controls__captions--on")?(L(u,p).classList.add("op-captions--on"),r.innerHTML=u._sanitize(e[t].text)):u._hide()}}else u._hide();else u._hide()},L(this,m).button.click=function(e){var t=e.target;if(L(u,w)){for(var n=L(u,d).getContainer().querySelectorAll(".op-settings"),i=0,r=n.length;i<r;++i)n[i]!==L(u,v)&&n[i].setAttribute("aria-hidden","true");"true"===L(u,v).getAttribute("aria-hidden")?L(u,v).setAttribute("aria-hidden","false"):L(u,v).setAttribute("aria-hidden","true")}else t.setAttribute("aria-pressed","true"),P.hasClass(t,"op-controls__captions--on")?(u._hide(),t.classList.remove("op-controls__captions--on"),t.setAttribute("data-active-captions","off")):(L(u,_)||S(u,_,L(u,g)[0]),u._show(),t.classList.add("op-controls__captions--on"),t.setAttribute("data-active-captions",L(u,_).language))},L(this,m).button.mouseover=function(){if(!o.IS_IOS&&!o.IS_ANDROID&&L(u,w)){for(var e=L(u,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t]!==L(u,v)&&e[t].setAttribute("aria-hidden","true");"true"===L(u,v).getAttribute("aria-hidden")&&L(u,v).setAttribute("aria-hidden","false")}},L(this,m).button.mouseout=function(){if(!o.IS_IOS&&!o.IS_ANDROID&&L(u,w)){for(var e=L(u,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t].setAttribute("aria-hidden","true");"false"===L(u,v).getAttribute("aria-hidden")&&L(u,v).setAttribute("aria-hidden","true")}},L(this,E)){var s=L(this,d).getContainer();if(s.insertBefore(L(this,p),s.firstChild),L(this,w)){var a=document.createElement("div");a.className="op-controls__container op-control__".concat(L(this,O)),locationSearch.get("ticket")||(a.appendChild(L(this,f)),a.appendChild(L(this,v))),L(this,d).getControls().getLayer(L(this,T)).appendChild(a)}else L(this,d).getControls().getLayer(L(this,T)).appendChild(L(this,f));L(this,f).addEventListener("click",L(this,m).button.click,o.EVENT_OPTIONS)}L(this,g).length<=1&&!L(this,w)||!L(this,g).length&&L(this,w)||(L(this,m).global.click=function(e){var t=e.target;if(t.closest("#".concat(L(u,d).id))&&P.hasClass(t,"op-subtitles__option")){var n=t.getAttribute("data-value"),i=n?n.replace("captions-",""):"",r=Array.from(L(u,g)).filter(function(e){return e.language===i});if(S(u,_,r?r.pop():void 0),L(u,w)){if(P.hasClass(L(u,f),"op-controls__captions--on")?(u._hide(),L(u,f).classList.remove("op-controls__captions--on"),L(u,f).setAttribute("data-active-captions","off")):(u._show(),L(u,f).classList.add("op-controls__captions--on"),L(u,f).setAttribute("data-active-captions",i)),t.parentElement&&t.parentElement.parentElement)for(var s=t.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),a=0,o=s.length;a<o;++a)s[a].setAttribute("aria-checked","false");t.parentElement&&t.parentElement.setAttribute("aria-checked","true"),L(u,v).setAttribute("aria-hidden","false")}else u._show(),L(u,f).setAttribute("data-active-captions",i);var l=M.addEvent("captionschanged");L(u,d).getElement().dispatchEvent(l)}},L(this,w)&&(L(this,f).addEventListener("mouseover",L(this,m).button.mouseover,o.EVENT_OPTIONS),L(this,v).addEventListener("mouseover",L(this,m).button.mouseover,o.EVENT_OPTIONS),L(this,v).addEventListener("mouseout",L(this,m).button.mouseout,o.EVENT_OPTIONS),L(this,d).getElement().addEventListener("controlshidden",L(this,m).button.mouseout,o.EVENT_OPTIONS)),void 0!==L(this,m).global.click&&document.addEventListener("click",L(this,m).global.click,o.EVENT_OPTIONS))}}},{key:"destroy",value:function(){void 0!==L(this,m).global.click&&document.removeEventListener("click",L(this,m).global.click),L(this,E)&&(L(this,f).removeEventListener("click",L(this,m).button.click),L(this,w)&&(L(this,f).removeEventListener("mouseover",L(this,m).button.mouseover),L(this,v).removeEventListener("mouseover",L(this,m).button.mouseover),L(this,v).removeEventListener("mouseout",L(this,m).button.mouseout),L(this,d).getElement().removeEventListener("controlshidden",L(this,m).button.mouseout),P.removeElement(L(this,v))),L(this,d).getElement().removeEventListener("timeupdate",L(this,m).media.timeupdate),P.removeElement(L(this,f)),P.removeElement(L(this,p)))}},{key:"addSettings",value:function(){if(L(this,w)||L(this,g).length<=1)return{};var e=this._formatMenuItems();return 2<e.length?{className:"op-subtitles__option",default:L(this,k)||"off",key:"captions",name:L(this,A).captions,subitems:e}:{}}},{key:"_getCuesFromText",value:function(e){var t=e.split(/\r?\n/),n=[],i=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;var r,s=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$");function a(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"===h(e)&&null!==e}for(var o=0,l=t.length;o<l;o++){var u=s.exec(t[o]);if(u&&o<t.length){0<=o-1&&""!==t[o-1]&&(r=t[o-1]);var c=t[++o];for(o++;""!==t[o]&&o<t.length;)c="".concat(c,"\n").concat(t[o]),o++;c=c.trim().replace(i,"<a href='$1' target='_blank'>$1</a>");var d=N.timeToSeconds(u[1]);n.push({endTime:N.timeToSeconds(u[3]),identifier:r||"",settings:a(u[5])?JSON.parse(u[5]):{},startTime:0===d?.2:d,text:c})}r=""}return n}},{key:"_getNativeCues",value:function(e){var i=[],r=e.cues;return Object.keys(r).forEach(function(e){var t=parseInt(e,10),n=r[t];i.push({endTime:n.endTime,identifier:n.id,settings:{},startTime:n.startTime,text:n.text})}),i}},{key:"_show",value:function(){if(L(this,p)&&L(this,_)&&void 0!==L(this,_).cues){var e=L(this,p).querySelector("span");e&&(e.innerHTML=""),L(this,d).getElement().addEventListener("timeupdate",L(this,m).media.timeupdate,o.EVENT_OPTIONS)}}},{key:"_hide",value:function(){L(this,p).classList.remove("op-captions--on"),L(this,_)||(L(this,f).classList.remove("op-controls__captions--on"),L(this,f).setAttribute("data-active-captions","off"))}},{key:"_search",value:function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>1,s=e[r].startTime,a=e[r].endTime;if(s<=t&&t<a)return r;s<t?n=r+1:t<s&&(i=r-1)}return-1}},{key:"_sanitize",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),i=n.length;i--;)P.removeElement(n[i]);for(var r=t.getElementsByTagName("*"),s=0,a=r.length;s<a;s++)for(var o=r[s].attributes,l=Array.prototype.slice.call(o),u=0,c=l.length;u<c;u++)/^(on|javascript:)/.test(l[u].name)?P.removeElement(r[s]):"style"===l[u].name&&r[s].removeAttribute(l[u].name);return t.innerHTML}},{key:"_prepareTrack",value:function(e,t,n){var i=this,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];L(this,b)[t]=n,L(this,g)[e].mode="disabled",r&&(S(this,k,t),L(this,f).classList.add("op-controls__captions--on"),L(this,f).setAttribute("data-active-captions",t),S(this,_,Array.from(L(this,g)).filter(function(e){return e.language===L(i,k)}).pop()),this._show(),L(this,d).getContainer().classList.contains("op-captions--detected")||L(this,d).getContainer().classList.add("op-captions--detected"))}},{key:"_formatMenuItems",value:function(){for(var i=this,r=[{key:"off",label:L(this,A).off}],e=function(e,t){var n=L(i,g)[e];(r=r.filter(function(e){return e.key!==n.language})).push({key:n.language,label:L(i,A).lang[n.language]||L(i,g)[e].label})},t=0,n=L(this,g).length;t<n;t++)e(t);return r}}])&&i(e.prototype,t),n&&i(e,n),c}();d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,E=new WeakMap,_=new WeakMap,k=new WeakMap,w=new WeakMap,A=new WeakMap,O=new WeakMap,T=new WeakMap,t.default=r},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l,s,a,o,u,c,d,h,f,p,v=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},m=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var y=n(1),g=n(2),r=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),l.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,[]),u.set(this,0),c.set(this,0),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),p.set(this,void 0),v(this,l,e),v(this,h,e.getOptions().labels),v(this,f,t),v(this,p,n),v(this,s,document.body.classList.contains("op-fullscreen__on"));var i=document;return this.fullScreenEnabled=!!(i.fullscreenEnabled||i.mozFullScreenEnabled||i.msFullscreenEnabled||i.webkitSupportsFullscreen||i.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this}var e,t,n;return e=r,(t=[{key:"create",value:function(){var t=this;v(this,a,document.createElement("button")),m(this,a).type="button",m(this,a).className="op-controls__fullscreen op-control__".concat(m(this,f)),m(this,a).tabIndex=0,m(this,a).title=m(this,h).fullscreen,m(this,a).setAttribute("aria-controls",m(this,l).id),m(this,a).setAttribute("aria-pressed","false"),m(this,a).setAttribute("aria-label",m(this,h).fullscreen),m(this,a).innerHTML='<span class="op-sr">'.concat(m(this,h).fullscreen,"</span>"),v(this,d,function(){m(t,a).setAttribute("aria-pressed","true"),t.toggleFullscreen()}),v(this,o,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"]),this._setFullscreenData(!1),m(this,l).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),y.EVENT_OPTIONS),m(this,o).forEach(function(e){document.addEventListener(e,t._fullscreenChange.bind(t),y.EVENT_OPTIONS)}),m(this,a).addEventListener("click",m(this,d).bind(this),y.EVENT_OPTIONS),m(this,l).getControls().getLayer(m(this,p)).appendChild(m(this,a)),y.IS_IPHONE&&(m(this,l).getElement().addEventListener("webkitbeginfullscreen",function(){v(t,s,!0),t._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")},y.EVENT_OPTIONS),m(this,l).getElement().addEventListener("webkitendfullscreen",function(){v(t,s,!1),t._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")},y.EVENT_OPTIONS))}},{key:"destroy",value:function(){var t=this;m(this,l).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),m(this,o).forEach(function(e){document.removeEventListener(e,t._fullscreenChange.bind(t))}),y.IS_IPHONE&&(m(this,l).getElement().removeEventListener("webkitbeginfullscreen",function(){v(t,s,!0),t._setFullscreenData(!1),document.body.classList.add("op-fullscreen__on")}),m(this,l).getElement().removeEventListener("webkitendfullscreen",function(){v(t,s,!1),t._setFullscreenData(!0),document.body.classList.remove("op-fullscreen__on")})),m(this,a).removeEventListener("click",m(this,d).bind(this)),g.removeElement(m(this,a))}},{key:"toggleFullscreen",value:function(){if(m(this,s)){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():document.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=m(this,l).getElement();v(this,u,window.screen.width),v(this,c,window.screen.height),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(y.IS_ANDROID||y.IS_IPHONE)){var n=window.screen;n.orientation&&(m(this,s)||n.orientation.lock("landscape"))}}},{key:"_fullscreenChange",value:function(){var e=m(this,s)?0:m(this,u),t=m(this,s)?0:m(this,c);this._setFullscreenData(!m(this,s)),m(this,l).isAd()&&m(this,l).getAd().resizeAds(e,t),v(this,s,!m(this,s)),m(this,s)?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){m(this,l).getContainer().setAttribute("data-fullscreen",(!!e).toString()),e?m(this,a).classList.add("op-controls__fullscreen--out"):m(this,a).classList.remove("op-controls__fullscreen--out")}},{key:"_resize",value:function(e,t){var n=m(this,l).getContainer(),i=m(this,l).getElement(),r=m(this,l).getOptions(),s="";if(e)n.style.width="100%",i.style.width="100%";else if(r.width){var a="number"==typeof r.width?"".concat(r.width,"px"):r.width;s+="width: ".concat(a," !important;"),i.style.removeProperty("width")}else i.style.removeProperty("width"),n.style.removeProperty("width");if(t)i.style.height="100%",n.style.height="100%";else if(r.height){var o="number"==typeof r.height?"".concat(r.height,"px"):r.height;s+="height: ".concat(o," !important;"),i.style.removeProperty("height")}else i.style.removeProperty("height"),n.style.removeProperty("height");s&&n.setAttribute("style",s)}},{key:"_keydownEvent",value:function(e){var t=e.which||e.keyCode||0;locationSearch.get("ticket")||70!==t||e.ctrlKey||void 0===this.fullScreenEnabled||(this.toggleFullscreen(),e.preventDefault())}}])&&i(e.prototype,t),n&&i(e,n),r}();l=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,t.default=r},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d,h,f,a,p,o,l,v,u,s,m=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var g=n(1),b=n(6),E=n(2),_=n(14),i=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),a.set(this,{button:{},global:{},media:{}}),p.set(this,void 0),o.set(this,void 0),l.set(this,[]),v.set(this,""),u.set(this,void 0),s.set(this,void 0),m(this,d,e),m(this,o,e.getOptions().labels),m(this,p,e.getOptions().detachMenus),m(this,u,t),m(this,s,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var c=this;m(this,v,"".concat(-1));var e=this._formatMenuItems(),t=e.length?e.find(function(e){return e.key===y(c,v)}):null,n=t?t.label:y(this,o).auto,i=!1;m(this,h,document.createElement("button")),y(this,h).className="op-controls__levels op-control__".concat(y(this,u)),y(this,h).tabIndex=0,y(this,h).title=y(this,o).mediaLevels,y(this,h).setAttribute("aria-controls",y(this,d).id),y(this,h).setAttribute("aria-label",y(this,o).mediaLevels),y(this,h).setAttribute("data-active-level",y(this,v)),y(this,h).innerHTML="<span>".concat(n,"</span>");var r=function(){y(c,l).length?i||(y(c,d).getMedia().level=-1,i=!0):(c._gatherLevels.bind(c),setTimeout(function(){y(c,d).getMedia().level=-1;var e=b.addEvent("controlschanged");y(c,d).getElement().dispatchEvent(e)},0))};y(this,a).media.loadedmetadata=r.bind(this),y(this,a).media.manifestLoaded=r.bind(this),y(this,a).media.hlsManifestParsed=r.bind(this),y(this,p)&&(this._buildMenu(),y(this,a).button.click=function(){if(y(c,p)){for(var e=y(c,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t]!==y(c,f)&&e[t].setAttribute("aria-hidden","true");"true"===y(c,f).getAttribute("aria-hidden")?y(c,f).setAttribute("aria-hidden","false"):y(c,f).setAttribute("aria-hidden","true")}},y(this,a).button.mouseover=function(){if(!g.IS_IOS&&!g.IS_ANDROID){for(var e=y(c,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t]!==y(c,f)&&e[t].setAttribute("aria-hidden","true");"true"===y(c,f).getAttribute("aria-hidden")&&y(c,f).setAttribute("aria-hidden","false")}},y(this,a).button.mouseout=function(){if(!g.IS_IOS&&!g.IS_ANDROID){for(var e=y(c,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t].setAttribute("aria-hidden","true");"false"===y(c,f).getAttribute("aria-hidden")&&y(c,f).setAttribute("aria-hidden","true")}},y(this,h).addEventListener("click",y(this,a).button.click,g.EVENT_OPTIONS),y(this,h).addEventListener("mouseover",y(this,a).button.mouseover,g.EVENT_OPTIONS),y(this,f).addEventListener("mouseover",y(this,a).button.mouseover,g.EVENT_OPTIONS),y(this,f).addEventListener("mouseout",y(this,a).button.mouseout,g.EVENT_OPTIONS),y(this,d).getElement().addEventListener("controlshidden",y(this,a).button.mouseout,g.EVENT_OPTIONS)),y(this,a).global.click=function(e){var t=e.target,n=y(c,d).getMedia().currentTime,i=y(c,d).getMedia().paused;if(t.closest("#".concat(y(c,d).id))&&E.hasClass(t,"op-levels__option")){var r=t.getAttribute("data-value"),s=parseInt(r?r.replace("levels-",""):"-1",10);if(m(c,v,"".concat(s)),y(c,p)){y(c,h).setAttribute("data-active-level","".concat(s)),y(c,h).innerHTML="<span>".concat(t.innerText,"</span>");for(var a=t.parentElement&&t.parentElement.parentElement?t.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],o=0,l=a.length;o<l;++o)a[o].setAttribute("aria-checked","false");t.parentElement&&t.parentElement.setAttribute("aria-checked","true"),y(c,f).setAttribute("aria-hidden","false")}y(c,d).getMedia().level=s,y(c,d).getMedia().currentTime=n,i||y(c,d).play();var u=b.addEvent("levelchanged",{detail:{label:t.innerText.trim(),level:s}});y(c,d).getElement().dispatchEvent(u),e.preventDefault()}};var s=g.NAV.connection||g.NAV.mozConnection||g.NAV.webkitConnection;y(this,a).global.connection=function(){var e=y(c,d).getMedia().current;if(!_.isDashSource(e)&&!_.isHlsSource(e)){var t=s.effectiveType,n=y(c,l).map(function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})}),i=n.find(function(e){return e.resolution<360});"4g"===t?i=n.find(function(e){return 720<=e.resolution}):"3g"===t&&(i=n.find(function(e){return 360<=e.resolution&&e.resolution<720})),i&&(y(c,d).pause(),y(c,d).getMedia().level=i.id,y(c,d).play()),t=s.effectiveType}},Object.keys(y(this,a).media).forEach(function(e){y(c,d).getElement().addEventListener(e,y(c,a).media[e],g.EVENT_OPTIONS)}),document.addEventListener("click",y(this,a).global.click,g.EVENT_OPTIONS),s&&s.addEventListener("change",y(this,a).global.connection,g.EVENT_OPTIONS)}},{key:"destroy",value:function(){var t=this,e=g.NAV.connection||g.NAV.mozConnection||g.NAV.webkitConnection;Object.keys(y(this,a).media).forEach(function(e){y(t,d).getElement().removeEventListener(e,y(t,a).media[e])}),document.removeEventListener("click",y(this,a).global.click),e&&e.removeEventListener("change",y(this,a).global.connection),y(this,p)&&(y(this,h).removeEventListener("click",y(this,a).button.click),E.removeElement(y(this,h)),y(this,h).removeEventListener("mouseover",y(this,a).button.mouseover),y(this,f).removeEventListener("mouseover",y(this,a).button.mouseover),y(this,f).removeEventListener("mouseout",y(this,a).button.mouseout),y(this,d).getElement().removeEventListener("controlshidden",y(this,a).button.mouseout),E.removeElement(y(this,f)))}},{key:"addSettings",value:function(){if(y(this,p))return{};var e=this._formatMenuItems();return 2<e.length?{className:"op-levels__option",default:y(this,v)||"-1",key:"levels",name:y(this,o).levels,subitems:e}:{}}},{key:"_formatMenuItems",value:function(){for(var n=this._gatherLevels(),e=n.length,i=e?[{key:"-1",label:y(this,o).auto}]:[],t=function(e){var t=n[e];(i=i.filter(function(e){return e.key!==t.id})).push({key:t.id,label:t.label})},r=0;r<e;r++)t(r);return i=i.reduce(function(e,t){return e.find(function(e){return e.label===t.label})?e:e.concat([t])},[]).sort(function(e,t){return parseInt(e.label,10)>parseInt(t.label,10)?1:-1})}},{key:"_getResolutionsLabel",value:function(e){return 4320<=e?"8K":2160<=e?"4K":1440<=e?"1440p":1080<=e?"1080p":720<=e?"720p":480<=e?"480p":360<=e?"360p":240<=e?"240p":144<=e?"144p":y(this,o).auto}},{key:"_gatherLevels",value:function(){var t=this;return y(this,l).length||y(this,d).getMedia().levels.forEach(function(e){e.label&&!e.label.startsWith("audio ")&&y(t,l).push(Object.assign(Object.assign({},e),{label:e.label||t._getResolutionsLabel(e.height)}))}),y(this,l)}},{key:"_buildMenu",value:function(){var t=this;if(y(this,p)){y(this,h).classList.add("op-control--no-hover"),m(this,f,document.createElement("div")),y(this,f).className="op-settings op-levels__menu",y(this,f).setAttribute("aria-hidden","true");var e=this._formatMenuItems(),n='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(e.map(function(e){return'\n                <div class="op-settings__submenu-item video" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(y(t,v)===e.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(e.key,'">').concat(e.label,"</div>\n                </div>")}).join(""),"\n            </div>");y(this,f).innerHTML=n;var i=document.createElement("div");i.className="op-controls__container op-control__".concat(y(this,u)),locationSearch.get("ticket")||(i.appendChild(y(this,h)),i.appendChild(y(this,f))),y(this,d).getControls().getLayer(y(this,s)).appendChild(i)}}}])&&r(e.prototype,t),n&&r(e,n),i}();d=new WeakMap,h=new WeakMap,f=new WeakMap,a=new WeakMap,p=new WeakMap,o=new WeakMap,l=new WeakMap,v=new WeakMap,u=new WeakMap,s=new WeakMap,t.default=i},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s,a,o,l,u,c,d=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},h=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=i(n(52)),p=n(1),v=n(6),m=n(2),y=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s.set(this,void 0),a.set(this,void 0),o.set(this,{controls:{},media:{}}),l.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d(this,s,e),d(this,l,h(this,s).getOptions().labels),d(this,u,t),d(this,c,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var n=this;d(this,a,document.createElement("button")),h(this,a).type="button",h(this,a).className="op-controls__playpause op-control__".concat(h(this,u)),h(this,a).tabIndex=0,h(this,a).title=h(this,l).play,h(this,a).setAttribute("aria-controls",h(this,s).id),h(this,a).setAttribute("aria-pressed","false"),h(this,a).setAttribute("aria-label",h(this,l).play),h(this,a).innerHTML='<span class="op-sr">'.concat(h(this,l).play,"/").concat(h(this,l).pause,"</span>"),locationSearch.get("ticket")||h(this,s).getControls().getLayer(h(this,c)).appendChild(h(this,a)),h(this,o).media.click=function(e){h(n,a).setAttribute("aria-pressed","true");var t=h(n,s).activeElement();t.paused||t.ended?(h(n,s).getAd()&&(h(n,s).getAd().playRequested=!0),locationSearch.get("ticket")||t.play()):new URLSearchParams(location.search).get("ticket")||t.pause();e.preventDefault()};var e=m.isAudio(h(this,s).getElement());h(this,o).media.play=function(){h(n,s).activeElement().ended?(h(n,s).isMedia()?h(n,a).classList.add("op-controls__playpause--replay"):h(n,a).classList.add("op-controls__playpause--pause"),h(n,a).title=h(n,l).play,h(n,a).setAttribute("aria-label",h(n,l).play)):(h(n,a).classList.remove("op-controls__playpause--replay"),h(n,a).classList.add("op-controls__playpause--pause"),h(n,a).title=h(n,l).pause,h(n,a).setAttribute("aria-label",h(n,l).pause),h(n,s).getOptions().pauseOthers&&Object.keys(f.default.instances).forEach(function(e){e!==h(n,s).id&&f.default.instances[e].activeElement().pause()}))},h(this,o).media.loadedmetadata=function(){m.hasClass(h(n,a),"op-controls__playpause--pause")&&(h(n,a).classList.remove("op-controls__playpause--replay"),h(n,a).classList.remove("op-controls__playpause--pause"),h(n,a).title=h(n,l).play,h(n,a).setAttribute("aria-label",h(n,l).play))},h(this,o).media.playing=function(){m.hasClass(h(n,a),"op-controls__playpause--pause")||(h(n,a).classList.remove("op-controls__playpause--replay"),h(n,a).classList.add("op-controls__playpause--pause"),h(n,a).title=h(n,l).pause,h(n,a).setAttribute("aria-label",h(n,l).pause))},h(this,o).media.pause=function(){h(n,a).classList.remove("op-controls__playpause--pause"),h(n,a).title=h(n,l).play,h(n,a).setAttribute("aria-label",h(n,l).play)},h(this,o).media.ended=function(){h(n,s).activeElement().ended&&h(n,s).isMedia()?(h(n,a).classList.add("op-controls__playpause--replay"),h(n,a).classList.remove("op-controls__playpause--pause")):h(n,s).getElement().currentTime>=h(n,s).getElement().duration||h(n,s).getElement().currentTime<=0?(h(n,a).classList.add("op-controls__playpause--replay"),h(n,a).classList.remove("op-controls__playpause--pause")):(h(n,a).classList.remove("op-controls__playpause--replay"),h(n,a).classList.add("op-controls__playpause--pause")),h(n,a).title=h(n,l).play,h(n,a).setAttribute("aria-label",h(n,l).play)},h(this,o).media.adsmediaended=function(){h(n,a).classList.remove("op-controls__playpause--replay"),h(n,a).classList.add("op-controls__playpause--pause"),h(n,a).title=h(n,l).pause,h(n,a).setAttribute("aria-label",h(n,l).pause)},h(this,o).media.playererror=function(){e&&h(n,s).activeElement().pause()};var t=h(this,s).getElement();h(this,o).controls.controlschanged=function(){if(!h(n,s).activeElement().paused){var e=v.addEvent("playing");t.dispatchEvent(e)}},Object.keys(h(this,o).media).forEach(function(e){t.addEventListener(e,h(n,o).media[e],p.EVENT_OPTIONS)}),h(this,s).getControls().getContainer().addEventListener("controlschanged",h(this,o).controls.controlschanged,p.EVENT_OPTIONS),h(this,s).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),p.EVENT_OPTIONS),h(this,a).addEventListener("click",h(this,o).media.click,p.EVENT_OPTIONS)}},{key:"destroy",value:function(){var t=this;Object.keys(h(this,o).media).forEach(function(e){h(t,s).getElement().removeEventListener(e,h(t,o).media[e])}),h(this,s).getControls().getContainer().removeEventListener("controlschanged",h(this,o).controls.controlschanged),h(this,s).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),h(this,a).removeEventListener("click",h(this,o).media.click),m.removeElement(h(this,a))}},{key:"_keydownEvent",value:function(e){var t=e.which||e.keyCode||0,n=h(this,s).activeElement();locationSearch.get("ticket")||13!==t&&32!==t||(n.paused?n.play():n.pause(),e.preventDefault())}}])&&r(e.prototype,t),n&&r(e,n),i}();s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,t.default=y},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c,d,h,l,f,p,v,m,y,g,b,E=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},_=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var k=n(1),w=n(2),A=n(51),i=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c.set(this,void 0),d.set(this,void 0),h.set(this,void 0),l.set(this,void 0),f.set(this,void 0),p.set(this,void 0),v.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),m.set(this,void 0),y.set(this,void 0),g.set(this,void 0),b.set(this,void 0),E(this,c,e),E(this,y,e.getOptions().labels),E(this,m,!1),E(this,g,t),E(this,b,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var u=this;E(this,d,document.createElement("div")),_(this,d).className="op-controls__progress op-control__".concat(_(this,g)),_(this,d).tabIndex=0,_(this,d).id="newid-seekbar",_(this,d).setAttribute("aria-label",_(this,y).progressSlider),_(this,d).setAttribute("aria-valuemin","0"),E(this,h,document.createElement("input")),_(this,h).type="range",_(this,h).className="op-controls__progress--seek",_(this,h).tabIndex=-1,_(this,h).setAttribute("min","0"),_(this,h).setAttribute("max","0"),_(this,h).setAttribute("step","0.1"),_(this,h).value="0",_(this,h).setAttribute("role","slider"),E(this,l,document.createElement("progress")),_(this,l).className="op-controls__progress--buffer",_(this,l).setAttribute("max","100"),_(this,l).value=0,E(this,f,document.createElement("progress")),_(this,f).className="op-controls__progress--played",_(this,f).setAttribute("max","100"),_(this,f).setAttribute("role","presentation"),_(this,f).value=0,_(this,d).appendChild(_(this,h)),_(this,d).appendChild(_(this,f)),_(this,d).appendChild(_(this,l)),k.IS_IOS||k.IS_ANDROID||(E(this,p,document.createElement("span")),_(this,p).className="op-controls__tooltip",_(this,p).tabIndex=-1,_(this,p).innerHTML="00:00",_(this,d).appendChild(_(this,p)));var e=function(){_(u,h).classList.contains("error")&&_(u,h).classList.remove("error");var e=_(u,c).activeElement();if(e.duration===1/0||_(u,c).getElement().getAttribute("op-live__enabled")||_(u,c).getElement().getAttribute("op-dvr__enabled"))_(u,c).getElement().getAttribute("op-dvr__enabled")?(_(u,h).setAttribute("max","1"),_(u,h).value="1",_(u,h).style.backgroundSize="100% 100%",_(u,f).value=1,_(u,d).setAttribute("aria-valuemax","1"),_(u,d).setAttribute("aria-hidden","false")):_(u,c).getOptions().live.showProgress||_(u,d).setAttribute("aria-hidden","true");else{_(u,h).setAttribute("max","".concat(e.duration));var t=_(u,c).isMedia()?e.currentTime:e.duration-e.currentTime;_(u,h).value=t.toString(),_(u,d).setAttribute("aria-valuemax",e.duration.toString())}},a=0,o=_(this,c).getOptions().progress.duration||0,t=w.isAudio(_(this,c).getElement());_(this,v).media.loadedmetadata=e.bind(this),_(this,v).controls.controlschanged=e.bind(this),_(this,v).media.progress=function(e){var t=e.target;if(t.duration===1/0||_(u,c).getElement().getAttribute("op-live__enabled"))_(u,c).getElement().getAttribute("op-dvr__enabled")||"false"!==_(u,d).getAttribute("aria-hidden")||_(u,c).getOptions().live.showProgress||_(u,d).setAttribute("aria-hidden","true");else if(0<t.duration)for(var n=0,i=t.buffered.length;n<i;n++)if(t.buffered.start(t.buffered.length-1-n)<t.currentTime){_(u,l).value=t.buffered.end(t.buffered.length-1-n)/t.duration*100;break}},_(this,v).media.waiting=function(){t&&!_(u,h).classList.contains("loading")&&_(u,h).classList.add("loading"),t&&_(u,h).classList.contains("error")&&_(u,h).classList.remove("error")},_(this,v).media.playererror=function(){t&&!_(u,h).classList.contains("error")&&_(u,h).classList.add("error"),t&&_(u,h).classList.contains("loading")&&_(u,h).classList.remove("loading")},_(this,v).media.pause=function(){var e=_(u,c).activeElement();if(e.duration!==1/0&&!_(u,c).getElement().getAttribute("op-live__enabled")){var t=e.currentTime;_(u,d).setAttribute("aria-valuenow",t.toString()),_(u,d).setAttribute("aria-valuetext",A.formatTime(t))}},_(this,v).media.play=function(){t&&_(u,h).classList.contains("loading")&&_(u,h).classList.remove("loading"),t&&_(u,h).classList.contains("error")&&_(u,h).classList.remove("error"),_(u,c).activeElement().duration===1/0||_(u,c).getElement().getAttribute("op-live__enabled")||(_(u,d).removeAttribute("aria-valuenow"),_(u,d).removeAttribute("aria-valuetext"))},_(this,v).media.playing=function(){t&&_(u,h).classList.contains("loading")&&_(u,h).classList.remove("loading"),t&&_(u,h).classList.contains("error")&&_(u,h).classList.remove("error")},_(this,v).media.timeupdate=function(){var e=_(u,c).activeElement();if(e.duration===1/0||_(u,c).getElement().getAttribute("op-live__enabled")&&!_(u,c).getElement().getAttribute("op-dvr__enabled"))_(u,c).getElement().getAttribute("op-dvr__enabled")||"false"!==_(u,d).getAttribute("aria-hidden")||_(u,c).getOptions().live.showProgress||_(u,d).setAttribute("aria-hidden","true");else{_(u,h).getAttribute("max")&&"0"!==_(u,h).getAttribute("max")&&parseFloat(_(u,h).getAttribute("max")||"-1")===e.duration||(_(u,h).setAttribute("max","".concat(e.duration)),_(u,d).setAttribute("aria-hidden","false"));var t=_(u,c).isMedia()?e.currentTime:100<=e.duration-e.currentTime+1?100:e.duration-e.currentTime+1,n=parseFloat(_(u,h).min),i=parseFloat(_(u,h).max);_(u,h).value=t.toString(),_(u,h).style.backgroundSize="".concat(100*(t-n)/(i-n),"% 100%"),_(u,f).value=e.duration<=0||isNaN(e.duration)||!isFinite(e.duration)?o:t/e.duration*100,_(u,c).getElement().getAttribute("op-dvr__enabled")&&99<=Math.floor(_(u,f).value)&&(a=e.currentTime,_(u,d).setAttribute("aria-hidden","false"))}},_(this,v).media.durationchange=function(){var e=_(u,c).activeElement(),t=_(u,c).isMedia()?e.currentTime:e.duration-e.currentTime;_(u,h).setAttribute("max","".concat(e.duration)),_(u,d).setAttribute("aria-valuemax",e.duration.toString()),_(u,f).value=e.duration<=0||isNaN(e.duration)||!isFinite(e.duration)?o:t/e.duration*100},_(this,v).media.ended=function(){_(u,h).style.backgroundSize="0% 100%",_(u,h).setAttribute("max","0"),_(u,l).value=0,_(u,f).value=0};var r=function(e){if(!w.hasClass(_(u,h),"op-progress--pressed")){var t=e.target;_(u,h).classList.add(".op-progress--pressed");var n=_(u,c).activeElement(),i=parseFloat(t.min),r=parseFloat(t.max),s=parseFloat(t.value);_(u,h).style.backgroundSize="".concat(100*(s-i)/(r-i),"% 100%"),_(u,f).value=n.duration<=0||isNaN(n.duration)||!isFinite(n.duration)?o:s/n.duration*100,_(u,c).getElement().getAttribute("op-dvr__enabled")?n.currentTime=99<=Math.round(_(u,f).value)?a:s:n.currentTime=s,_(u,h).classList.remove(".op-progress--pressed")}},s=function(e){var t=_(u,c).activeElement();1!==e.which&&0!==e.which||!_(u,c).isMedia()||t.paused||t.play().then(function(){t.pause.bind(u),E(u,m,!0)})},n=function(){var e=_(u,c).activeElement();!0===_(u,m)&&_(u,c).isMedia()&&e.paused&&(e.play(),E(u,m,!1))};_(this,v).slider.input=r.bind(this),_(this,v).slider.change=r.bind(this),_(this,v).slider.mousedown=s.bind(this),_(this,v).slider.mouseup=n.bind(this),_(this,v).slider.touchstart=function(e){var t=_(u,c).activeElement();if(t.duration===1/0)return!0;var n=e.originalEvent?e.originalEvent.changedTouches:e.changedTouches,i=((n?n[0].pageX:e.pageX)-w.offset(_(u,d)).left)/_(u,d).offsetWidth*t.duration;_(u,h).value=i.toString(),r(e),s(e)}.bind(this),_(this,v).slider.touchend=n.bind(this),k.IS_IOS||k.IS_ANDROID||(_(this,v).container.mousemove=function(e){var t=_(u,c).activeElement();if(t.duration===1/0||_(u,c).isAd())return!0;var n=e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,i=n-w.offset(_(u,d)).left,r=_(u,p).offsetWidth/2,s=i/_(u,d).offsetWidth,a=s*t.duration,o=_(u,c).getContainer(),l=o.offsetWidth-_(u,p).offsetWidth;i<=0||n-w.offset(o).left<=r?i=0:n-w.offset(o).left>=l?i=l-w.offset(_(u,h)).left-10:i-=r,0<=s&&s<=1?_(u,p).classList.add("op-controls__tooltip--visible"):_(u,p).classList.remove("op-controls__tooltip--visible"),_(u,p).style.left="".concat(i,"px"),_(u,p).innerHTML=isNaN(a)?"00:00":A.formatTime(a)},_(this,v).global.mousemove=function(e){e.target.closest(".op-controls__progress")&&!_(u,c).isAd()||_(u,p).classList.remove("op-controls__tooltip--visible")}),Object.keys(_(this,v).media).forEach(function(e){_(u,c).getElement().addEventListener(e,_(u,v).media[e],k.EVENT_OPTIONS)}),locationSearch.get("ticket")||(Object.keys(_(this,v).slider).forEach(function(e){_(u,h).addEventListener(e,_(u,v).slider[e],k.EVENT_OPTIONS)}),_(this,d).addEventListener("keydown",_(this,c).getEvents().keydown,k.EVENT_OPTIONS),_(this,d).addEventListener("mousemove",_(this,v).container.mousemove,k.EVENT_OPTIONS),document.addEventListener("mousemove",_(this,v).global.mousemove,k.EVENT_OPTIONS),_(this,c).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),k.EVENT_OPTIONS),_(this,c).getControls().getContainer().addEventListener("controlschanged",_(this,v).controls.controlschanged,k.EVENT_OPTIONS)),_(this,c).getControls().getLayer(_(this,b)).appendChild(_(this,d))}},{key:"destroy",value:function(){var t=this;Object.keys(_(this,v)).forEach(function(e){_(t,c).getElement().removeEventListener(e,_(t,v)[e])}),Object.keys(_(this,v).slider).forEach(function(e){_(t,h).removeEventListener(e,_(t,v).slider[e])}),_(this,d).removeEventListener("keydown",_(this,c).getEvents().keydown),_(this,d).removeEventListener("mousemove",_(this,v).container.mousemove),document.removeEventListener("mousemove",_(this,v).global.mousemove),_(this,c).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),_(this,c).getControls().getContainer().removeEventListener("controlschanged",_(this,v).controls.controlschanged),w.removeElement(_(this,l)),w.removeElement(_(this,f)),w.removeElement(_(this,h)),k.IS_IOS||k.IS_ANDROID||w.removeElement(_(this,p)),w.removeElement(_(this,d))}},{key:"_keydownEvent",value:function(e){var t=_(this,c).activeElement(),n=_(this,c).isAd(),i=e.which||e.keyCode||0;_(this,c).getOptions().step?_(this,c).getOptions().step:t.duration;new URLSearchParams(location.search).get("ticket")||(35!==i||n?36!==i||n?37!==i&&39!==i||n||t.duration===1/0||(t.currentTime+=37===i?-5:5,t.currentTime<0?t.currentTime=0:t.currentTime>=t.duration&&(t.currentTime=t.duration),e.preventDefault()):(t.currentTime=0,e.preventDefault()):(t.currentTime=t.duration,e.preventDefault()))}}])&&r(e.prototype,t),n&&r(e,n),i}();c=new WeakMap,d=new WeakMap,h=new WeakMap,l=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,t.default=i},function(e,t,n){function m(e){return(m="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y,g,s,b,o,E,a,l,u,_=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},k=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),w=n(2),i=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),y.set(this,void 0),g.set(this,{}),s.set(this,void 0),b.set(this,void 0),o.set(this,{global:{},media:{}}),E.set(this,""),a.set(this,void 0),l.set(this,void 0),u.set(this,void 0),_(this,y,e),_(this,a,e.getOptions().labels),_(this,l,t),_(this,u,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var r=this;_(this,s,document.createElement("button")),k(this,s).className="op-controls__settings op-control__".concat(k(this,l)),k(this,s).tabIndex=0,k(this,s).title=k(this,a).settings,k(this,s).setAttribute("aria-controls",k(this,y).id),k(this,s).setAttribute("aria-pressed","false"),k(this,s).setAttribute("aria-label",k(this,a).settings),k(this,s).innerHTML='<span class="op-sr">'.concat(k(this,a).settings,"</span>"),_(this,b,document.createElement("div")),k(this,b).className="op-settings",k(this,b).setAttribute("aria-hidden","true"),k(this,b).innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){k(r,s).setAttribute("aria-pressed","true");for(var e=k(r,y).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t]!==k(r,b)&&e[t].setAttribute("aria-hidden","true");k(r,b).setAttribute("aria-hidden","false"===k(r,b).getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var e;e&&"undefined"!=typeof window&&window.cancelAnimationFrame(e),"undefined"!=typeof window&&(e=window.requestAnimationFrame(function(){k(r,b).innerHTML=k(r,E),k(r,b).setAttribute("aria-hidden","true")}))},this.removeEvent=function(e){var t=e.detail,n=t.id,i=t.type;r.removeItem(n,i)},k(this,o).media.controlshidden=this.hideEvent.bind(this),k(this,o).media.settingremoved=this.removeEvent.bind(this),k(this,o).media.play=this.hideEvent.bind(this),k(this,o).media.pause=this.hideEvent.bind(this),k(this,o).global.click=function(e){e.target.closest("#".concat(k(r,y).id))&&w.hasClass(e.target,"op-speed__option")&&(k(r,y).getMedia().playbackRate=parseFloat(e.target.getAttribute("data-value").replace("speed-","")))},k(this,o).global.resize=this.hideEvent.bind(this),k(this,s).addEventListener("click",this.clickEvent.bind(this),c.EVENT_OPTIONS),Object.keys(k(this,o)).forEach(function(e){k(r,y).getElement().addEventListener(e,k(r,o).media[e],c.EVENT_OPTIONS)}),document.addEventListener("click",k(this,o).global.click,c.EVENT_OPTIONS),"undefined"!=typeof window&&window.addEventListener("resize",k(this,o).global.resize,c.EVENT_OPTIONS),k(this,y).getControls().getLayer(k(this,u)).appendChild(k(this,s)),k(this,y).getContainer().appendChild(k(this,b))}},{key:"destroy",value:function(){var t=this;k(this,s).removeEventListener("click",this.clickEvent.bind(this)),Object.keys(k(this,o)).forEach(function(e){k(t,y).getElement().removeEventListener(e,k(t,o).media[e])}),document.removeEventListener("click",k(this,o).global.click),"undefined"!=typeof window&&window.removeEventListener("resize",k(this,o).global.resize),void 0!==k(this,o).global["settings.submenu"]&&(document.removeEventListener("click",k(this,o).global["settings.submenu"]),k(this,y).getElement().removeEventListener("controlshidden",this.hideEvent)),w.removeElement(k(this,b)),w.removeElement(k(this,s))}},{key:"addSettings",value:function(){return{className:"op-speed__option",default:k(this,y)&&k(this,y).getMedia()?k(this,y).getMedia().defaultPlaybackRate.toString():"1",key:"speed",name:k(this,a).speed,subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:k(this,a).speedNormal},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,f,p,t,n){var v=this,i=document.createElement("div");i.className="op-settings__menu-item openplayer-item-"+f,i.tabIndex=0,i.setAttribute("role","menuitemradio"),i.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(f,"-").concat(p,'">').concat(e,"</div>");var r=t?t.find(function(e){return e.key===p}):null;r&&(i.innerHTML+='<div class="op-settings__menu-content">'.concat(r.label,"</div>"));var s=k(this,b).querySelector(".op-settings__menu");if(s&&s.appendChild(i),_(this,E,k(this,b).innerHTML),t){var a="";a="Audio Quality"===e?'\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(f,'">\n                    ').concat(t.map(function(e){return'\n                    <div class="op-settings__submenu-item Audio" tabindex="0" role="menuitemradio"\n                        aria-checked="'.concat(p===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(n||"",'" data-value="').concat(f,"-").concat(e.key,'">').concat(e.label,"</div>\n                    </div>")}).join(""),"\n                </div>"):'\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(f,'">\n                    ').concat(t.map(function(e){return'\n                    <div class="op-settings__submenu-item " tabindex="0" role="menuitemradio"\n                        aria-checked="'.concat(p===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(n||"",'" data-value="').concat(f,"-").concat(e.key,'">').concat(e.label,"</div>\n                    </div>")}).join(""),"\n                </div>"),k(this,g)[f]=a}k(this,o).global["settings.submenu"]=function(e){var t=e.target;if(t.closest("#".concat(k(v,y).id))){if(w.hasClass(t,"op-settings__back"))k(v,b).classList.add("op-settings--sliding"),setTimeout(function(){k(v,b).innerHTML=k(v,E),k(v,b).classList.remove("op-settings--sliding")},100);else if(w.hasClass(t,"op-settings__menu-content")){var n=t.parentElement?t.parentElement.querySelector(".op-settings__menu-label"):null,i=n?n.getAttribute("data-value"):null,r=i?i.split("-"):[];if(0<r.length){r.pop();var s=r.join("-").replace(/^\-|\-$/,"");void 0!==m(k(v,g)[s])&&(k(v,b).classList.add("op-settings--sliding"),setTimeout(function(){k(v,b).innerHTML=k(v,g)[s],k(v,b).classList.remove("op-settings--sliding")},100))}}else if(w.hasClass(t,"op-settings__submenu-label")){var a=t.getAttribute("data-value"),o=a?a.replace("".concat(f,"-"),""):"",l=t.innerText,u=k(v,b).querySelector("#menu-item-".concat(f," .op-settings__submenu-item[aria-checked=true]"));if(u){for(var c=t.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),d=0,h=c.length;d<h;++d)c[d].setAttribute("aria-checked","false");u.setAttribute("aria-checked","false"),t.parentElement&&t.parentElement.setAttribute("aria-checked","true"),k(v,g)[f]=k(v,b).innerHTML,k(v,b).classList.add("op-settings--sliding"),setTimeout(function(){k(v,b).innerHTML=k(v,E);var e=k(v,b).querySelector('.op-settings__menu-label[data-value="'.concat(f,"-").concat(p,'"]'));e&&(e.setAttribute("data-value","".concat(a)),e.nextElementSibling&&(e.nextElementSibling.innerHTML=l)),p=o,_(v,E,k(v,b).innerHTML),k(v,b).classList.remove("op-settings--sliding")},100)}}}else v.hideEvent()},document.addEventListener("click",k(this,o).global["settings.submenu"],c.EVENT_OPTIONS),k(this,y).getElement().addEventListener("controlshidden",this.hideEvent,c.EVENT_OPTIONS)}},{key:"removeItem",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,i=k(this,y).getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(i&&w.removeElement(i),k(this,y).getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<n){delete k(this,g)[t];var r=k(this,y).getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),s=r?r.closest(".op-settings__menu-item"):null;s&&w.removeElement(s)}}}])&&r(e.prototype,t),n&&r(e,n),i}();y=new WeakMap,g=new WeakMap,s=new WeakMap,b=new WeakMap,o=new WeakMap,E=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap,t.default=i},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s,a,o,l,u,c,d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(2),g=n(51),i=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c.set(this,{controls:{},media:{}}),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),p(this,s,e),p(this,d,e.getOptions().labels),p(this,h,t),p(this,f,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var n=this;p(this,a,document.createElement("time")),v(this,a).className="op-controls__current",v(this,a).setAttribute("role","timer"),v(this,a).setAttribute("aria-live","off"),v(this,a).setAttribute("aria-hidden","false"),v(this,a).innerText="0:00";var i=v(this,s).getOptions().progress.showCurrentTimeOnly;i||(p(this,o,document.createElement("span")),v(this,o).className="op-controls__time-delimiter",v(this,o).setAttribute("aria-hidden","false"),v(this,o).innerText="/",p(this,l,document.createElement("time")),v(this,l).className="op-controls__duration",v(this,l).setAttribute("aria-hidden","false"),v(this,l).innerText=g.formatTime(v(this,s).getOptions().progress.duration));var e=v(this,s).getControls().getLayer(v(this,f));p(this,u,document.createElement("span")),v(this,u).className="op-controls-time op-control__".concat(v(this,h)),v(this,u).appendChild(v(this,a)),i||(v(this,u).appendChild(v(this,o)),v(this,u).appendChild(v(this,l))),e.appendChild(v(this,u));var t=function(){var e=v(n,s).activeElement();if(e.duration===1/0||v(n,s).getElement().getAttribute("op-live__enabled"))i||v(n,l).setAttribute("aria-hidden","true"),v(n,o).setAttribute("aria-hidden","true");else{if(!i){var t=isNaN(e.duration)?v(n,s).getOptions().progress.duration:e.duration;v(n,l).innerText=g.formatTime(t)}v(n,a).innerText=g.formatTime(e.currentTime)}};v(this,c).media.loadedmetadata=t.bind(this),v(this,c).controls.controlschanged=t.bind(this);var r=v(this,s).getOptions().live.showLabel;v(this,c).media.timeupdate=function(){var e=v(n,s).activeElement();if(e.duration===1/0||v(n,s).getElement().getAttribute("op-live__enabled")||v(n,s).getElement().getAttribute("op-dvr__enabled"))v(n,s).getElement().getAttribute("op-dvr__enabled")?(i||(v(n,l).setAttribute("aria-hidden","true"),v(n,o).setAttribute("aria-hidden","true")),v(n,a).innerText=g.formatTime(e.currentTime)):((i||!v(n,s).getElement().getAttribute("op-dvr__enabled")&&"false"===v(n,l).getAttribute("aria-hidden"))&&(i||(v(n,l).setAttribute("aria-hidden","true"),v(n,o).setAttribute("aria-hidden","true"))),v(n,a).innerText=r?v(n,d).live:g.formatTime(e.currentTime));else{var t=g.formatTime(e.duration);i||isNaN(e.duration)||t===v(n,l).innerText?(i||t!==v(n,l).innerText)&&(v(n,a).innerText=r?v(n,d).live:g.formatTime(e.currentTime)):(v(n,l).innerText=t,v(n,l).setAttribute("aria-hidden","false"),v(n,o).setAttribute("aria-hidden","false")),v(n,a).innerText=g.formatTime(e.currentTime)}},v(this,c).media.ended=function(){var e=v(n,s).activeElement(),t=isNaN(e.duration)?v(n,s).getOptions().progress.duration:e.duration;!i&&v(n,s).isMedia()&&(v(n,l).innerText=g.formatTime(t))},Object.keys(v(this,c).media).forEach(function(e){v(n,s).getElement().addEventListener(e,v(n,c).media[e],m.EVENT_OPTIONS)}),v(this,s).getControls().getContainer().addEventListener("controlschanged",v(this,c).controls.controlschanged,m.EVENT_OPTIONS)}},{key:"destroy",value:function(){var t=this;Object.keys(v(this,c).media).forEach(function(e){v(t,s).getElement().removeEventListener(e,v(t,c).media[e])}),v(this,s).getControls().getContainer().removeEventListener("controlschanged",v(this,c).controls.controlschanged),y.removeElement(v(this,a)),v(this,s).getOptions().progress.showCurrentTimeOnly||(y.removeElement(v(this,o)),y.removeElement(v(this,l))),y.removeElement(v(this,u))}}])&&r(e.prototype,t),n&&r(e,n),i}();s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=i},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a,o,l,u,c,d,h,f,p,v,m=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var g=n(1),b=n(6),E=n(2),i=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d.set(this,{button:{},media:{},slider:{}}),h.set(this,void 0),f.set(this,void 0),p.set(this,void 0),v.set(this,void 0),m(this,a,e),m(this,f,e.getOptions().labels),m(this,h,y(this,a).getMedia().volume),m(this,p,t),m(this,v,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var s=this;m(this,l,document.createElement("div")),y(this,l).className="op-controls__volume op-control__".concat(y(this,p)),y(this,l).tabIndex=0,y(this,l).setAttribute("aria-valuemin","0"),y(this,l).setAttribute("aria-valuemax","100"),y(this,l).setAttribute("aria-valuenow","".concat(y(this,h))),y(this,l).setAttribute("aria-valuetext","".concat(y(this,f).volume,": ").concat(y(this,h))),y(this,l).setAttribute("aria-orientation","vertical"),y(this,l).setAttribute("aria-label",y(this,f).volumeSlider),m(this,c,document.createElement("input")),y(this,c).type="range",y(this,c).className="op-controls__volume--input",y(this,c).tabIndex=-1,y(this,c).value=y(this,a).getMedia().volume.toString(),y(this,c).setAttribute("min","0"),y(this,c).setAttribute("max","1"),y(this,c).setAttribute("step","0.1"),y(this,c).setAttribute("aria-label",y(this,f).volumeControl),m(this,u,document.createElement("progress")),y(this,u).className="op-controls__volume--display",y(this,u).setAttribute("max","10"),y(this,u).setAttribute("role","presentation"),y(this,u).value=10*y(this,a).getMedia().volume,y(this,l).appendChild(y(this,c)),y(this,l).appendChild(y(this,u)),m(this,o,document.createElement("button")),y(this,o).type="button",y(this,o).className="op-controls__mute op-control__".concat(y(this,p)),y(this,o).tabIndex=0,y(this,o).title=y(this,f).mute,y(this,o).setAttribute("aria-controls",y(this,a).id),y(this,o).setAttribute("aria-pressed","false"),y(this,o).setAttribute("aria-label",y(this,f).mute),y(this,o).innerHTML='<span class="op-sr">'.concat(y(this,f).mute,"</span>");var e=function(e){var t=y(s,a).activeElement(),n=parseFloat(e.target.value);t.volume=n,t.muted=0===t.volume,m(s,h,n);var i=y(s,a).getContainer().querySelector(".op-player__unmute");!t.muted&&i&&E.removeElement(i);var r=b.addEvent("volumechange");y(s,a).getElement().dispatchEvent(r)};y(this,d).media.volumechange=function(){var e,t,n,i,r=y(s,a).activeElement();t=1*(e=r).volume,n=Math.floor(100*t),y(s,c).value="".concat(e.volume),y(s,u).value=10*t,y(s,l).setAttribute("aria-valuenow","".concat(n)),y(s,l).setAttribute("aria-valuetext","".concat(y(s,f).volume,": ").concat(n)),(i=r.volume)<=.5&&0<i?(y(s,o).classList.remove("op-controls__mute--muted"),y(s,o).classList.add("op-controls__mute--half")):(0===i?y(s,o).classList.add("op-controls__mute--muted"):y(s,o).classList.remove("op-controls__mute--muted"),y(s,o).classList.remove("op-controls__mute--half"))},y(this,d).media.timeupdate=function(){E.isAudio(y(s,a).getElement())&&(y(s,a).activeElement().duration===1/0||y(s,a).getElement().getAttribute("op-live__enabled"))},y(this,d).media.loadedmetadata=function(){var e=y(s,a).activeElement();e.muted&&(e.volume=0);var t=b.addEvent("volumechange");y(s,a).getElement().dispatchEvent(t)},y(this,d).slider.input=e.bind(this),y(this,d).slider.change=e.bind(this),y(this,d).button.click=function(){y(s,o).setAttribute("aria-pressed","true");var e=y(s,a).activeElement();e.muted=!e.muted,e.muted?(e.volume=0,y(s,o).title=y(s,f).unmute,y(s,o).setAttribute("aria-label",y(s,f).unmute)):(e.volume=y(s,h),y(s,o).title=y(s,f).mute,y(s,o).setAttribute("aria-label",y(s,f).mute));var t=b.addEvent("volumechange");y(s,a).getElement().dispatchEvent(t)},y(this,o).addEventListener("click",y(this,d).button.click,g.EVENT_OPTIONS),Object.keys(y(this,d).media).forEach(function(e){y(s,a).getElement().addEventListener(e,y(s,d).media[e],g.EVENT_OPTIONS)}),Object.keys(y(this,d).slider).forEach(function(e){y(s,c).addEventListener(e,y(s,d).slider[e],g.EVENT_OPTIONS)}),y(this,a).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),g.EVENT_OPTIONS);var t=y(this,a).getControls().getLayer(y(this,v));t.appendChild(y(this,o)),t.appendChild(y(this,l))}},{key:"destroy",value:function(){var t=this;y(this,o).removeEventListener("click",y(this,d).button.click),Object.keys(y(this,d).media).forEach(function(e){y(t,a).getElement().removeEventListener(e,y(t,d).media[e])}),Object.keys(y(this,d).slider).forEach(function(e){y(t,c).removeEventListener(e,y(t,d).slider[e])}),y(this,a).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),E.removeElement(y(this,c)),E.removeElement(y(this,u)),E.removeElement(y(this,l))}},{key:"_keydownEvent",value:function(e){var t=e.which||e.keyCode||0,n=y(this,a).activeElement();if(!locationSearch.get("ticket")&&(38===t||40===t)){var i=38===t?Math.min(n.volume+.1,1):Math.max(n.volume-.1,0);n.volume=i,n.muted=!(0<i),e.preventDefault()}}}])&&r(e.prototype,t),n&&r(e,n),i}();a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,t.default=i},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l,a,o,u,c,d,h,f,p,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),v=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return v(t,e),t},y=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var E=b(n(145)),_=b(n(146)),k=b(n(147)),w=b(n(148)),A=m(n(14)),O=0;setTimeout(function(){var e=document.getElementById("video-info-id");e&&e.addEventListener("closeMovieInfo",function(e){O=0},!1)},2e3);var T=function(){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length?arguments[3]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),l.set(this,void 0),a.set(this,void 0),o.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d.set(this,void 0),h.set(this,!1),f.set(this,{media:{},optionsKey:{},rules:[]}),p.set(this,void 0),y(this,l,e),y(this,c,t),y(this,o,this._getMediaFiles()),y(this,f,i),y(this,d,n),this}var e,t,n;return e=r,(t=[{key:"canPlayType",value:function(e){return g(this,a).canPlayType(e)}},{key:"load",value:function(){var n=this;if(!g(this,o).length)throw new TypeError("Media not set");g(this,a)&&"function"==typeof g(this,a).destroy&&(1===g(this,o).length&&g(this,o)[0].src===g(this,a).media.src||g(this,a).destroy());g(this,o).some(function(t){try{y(n,a,n._invoke(t))}catch(e){y(n,a,new w.default(g(n,l),t))}return g(n,a).canPlayType(t.type)});try{if(null===g(this,a))throw new TypeError("Media cannot be played with any valid media type");return g(this,a).promise.then(function(){g(n,a).load()})}catch(e){throw g(this,a).destroy(),e}}},{key:"play",value:function(){var e=this;if(!this.loaded){this.loaded=!0;var t=this.load();if(t)return this.loaded=!0,t.then(function(){g(e,a).play()})}return y(this,u,new _Promise(function(e){e({})}).then(g(this,a).promise.then(g(this,a).play()))),g(this,u)}},{key:"pause",value:function(){var e=this;O+=1;var t=function(){var e=!1,t="pc";(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0);var n,i=navigator.userAgent,r=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return{name:"IE ",version:(n=/\brv[ :]+(\d+)/g.exec(i)||[])[1]||""};if("Chrome"===r[1]&&null!=(n=i.match(/\bOPR\/(\d+)/))&&(r[0]="Opera/"+n[1]),r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(n=i.match(/version\/(\d+)/i))&&r.splice(1,1,n[1]),r.length&&"Netscape"===r[0]&&(r[1].includes("iPhone")||r[1].includes("iPad"))){var s=r[1];(r=[]).push("Safari"),r.push(s.substr(s.indexOf("OS")+2,7).trim().split("_")[0])}return"Safari"===r[0]&&e?t="iPhone":"Safari"!==r[0]&&e&&(t="Android"),{name:r[0].replace(/ /g,""),version:r[1],isMobile:e,device:t}}();2===O?(void 0!==g(this,u)?g(this,u).then(function(){g(e,a).pause()}):g(this,a).pause(),O=0):t&&"pc"===t.device&&(void 0!==g(this,u)?g(this,u).then(function(){g(e,a).pause()}):g(this,a).pause(),O=0)}},{key:"destroy",value:function(){g(this,a).destroy()}},{key:"_getMediaFiles",value:function(){var e=[],t=g(this,l).querySelectorAll("source"),n=g(this,l).src;n&&e.push({src:n,type:g(this,l).getAttribute("type")||A.predictType(n)});for(var i=0,r=t.length;i<r;i++){var s=t[i],a=s.src;e.push({src:a,type:s.getAttribute("type")||A.predictType(a)}),0===i&&y(this,p,e[0])}return e.length||e.push({src:"",type:A.predictType("")}),e}},{key:"_invoke",value:function(r){var s=this,e=g(this,l).canPlayType("application/vnd.apple.mpegurl")||g(this,l).canPlayType("application/x-mpegURL");y(this,p,r);var a,t=!1;if(Object.keys(g(this,c).controls.layers).forEach(function(e){-1<g(s,c).controls.layers[e].indexOf("levels")&&(t=!0)}),Object.keys(g(this,f).media).length)return g(this,f).rules.forEach(function(e){var t=e(r.src);if(t){var n=g(s,f).media[t],i=g(s,c)[g(s,f).optionsKey[t]]||void 0;a=n(g(s,l),r,g(s,d),i)}}),a?(a.create(),a):new w.default(g(this,l),r);if(A.isHlsSource(r)){if(e&&g(this,c).forceNative&&!t)return new w.default(g(this,l),r);var n=g(this,c)&&g(this,c).hls?g(this,c).hls:void 0;return new k.default(g(this,l),r,g(this,d),n)}if(A.isDashSource(r)){var i=g(this,c)&&g(this,c).dash?g(this,c).dash:void 0;return new E.default(g(this,l),r,i)}if(A.isFlvSource(r)){var o=g(this,c)&&g(this,c).flv?g(this,c).flv:{debug:!1,type:"flv",url:r.src};return new _.default(g(this,l),r,o)}return new w.default(g(this,l),r)}},{key:"src",set:function(e){var t=this;"string"==typeof e?g(this,o).push({src:e,type:A.predictType(e)}):Array.isArray(e)?y(this,o,e):"object"===i(e)&&g(this,o).push(e),g(this,o).some(function(e){return t.canPlayType(e.type)}),g(this,l).src&&g(this,l).setAttribute("data-op-file",g(this,o)[0].src),g(this,l).src=g(this,o)[0].src,g(this,a).src=g(this,o)[0],y(this,p,g(this,o)[0])},get:function(){return g(this,o)}},{key:"current",get:function(){return g(this,p)}},{key:"mediaFiles",set:function(e){y(this,o,e)},get:function(){return g(this,o)}},{key:"volume",set:function(e){g(this,a)&&(g(this,a).volume=e)},get:function(){return g(this,a)?g(this,a).volume:g(this,l).volume}},{key:"muted",set:function(e){g(this,a)&&(g(this,a).muted=e)},get:function(){return g(this,a)?g(this,a).muted:g(this,l).muted}},{key:"playbackRate",set:function(e){g(this,a)&&(g(this,a).playbackRate=e)},get:function(){return g(this,a)?g(this,a).playbackRate:g(this,l).playbackRate}},{key:"defaultPlaybackRate",set:function(e){g(this,a)&&(g(this,a).defaultPlaybackRate=e)},get:function(){return g(this,a)?g(this,a).defaultPlaybackRate:g(this,l).defaultPlaybackRate}},{key:"currentTime",set:function(e){g(this,a)&&(g(this,a).currentTime=e)},get:function(){return g(this,a)?g(this,a).currentTime:g(this,l).currentTime}},{key:"duration",get:function(){var e=g(this,a)?g(this,a).duration:g(this,l).duration;return e===1/0&&g(this,l).seekable&&g(this,l).seekable.length?g(this,l).seekable.end(0):e}},{key:"paused",get:function(){return g(this,a)?g(this,a).paused:g(this,l).paused}},{key:"ended",get:function(){return g(this,a)?g(this,a).ended:g(this,l).ended}},{key:"loaded",set:function(e){y(this,h,e)},get:function(){return g(this,h)}},{key:"level",set:function(e){g(this,a)&&(g(this,a).level=e)},get:function(){return g(this,a)?g(this,a).level:-1}},{key:"levels",get:function(){return g(this,a)?g(this,a).levels:[]}},{key:"audioLevel",set:function(e){g(this,a)&&(g(this,a).level=e)},get:function(){return g(this,a)?g(this,a).audioLevel:-1}},{key:"audioLevels",get:function(){return g(this,a)?g(this,a).audioLevels:[]}},{key:"instance",get:function(){return g(this,a)?g(this,a).instance:null}}])&&s(e.prototype,t),n&&s(e,n),r}();l=new WeakMap,a=new WeakMap,o=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,t.default=T},function(e,t,n){function a(e){return(a="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(i);if(r){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h,f,p,v=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},m=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var y=n(1),g=n(6),b=n(2),E=n(14),_=i(n(30)),r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,_["default"]);var t,n,i,r=u(s);function s(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i=r.call(this,e,t),h.set(d(i),void 0),f.set(d(i),{}),p.set(d(i),{}),v(d(i),p,n),i.promise="undefined"==typeof dashjs?b.loadScript("/library/openplayer/dash.all.min.js"):new _Promise(function(e){e({})}),i.promise.then(function(){v(d(i),h,dashjs.MediaPlayer().create()),i.instance=m(d(i),h)}),c(i,d(i))}return t=s,(n=[{key:"canPlayType",value:function(e){return y.HAS_MSE&&"application/dash+xml"===e}},{key:"load",value:function(){var t=this;this._preparePlayer(),m(this,h).attachSource(this.media.src);var e=g.addEvent("loadedmetadata");this.element.dispatchEvent(e),m(this,f)||(v(this,f,dashjs.MediaPlayer.events),Object.keys(m(this,f)).forEach(function(e){m(t,h).on(m(t,f)[e],t._assign.bind(t))}))}},{key:"destroy",value:function(){this._revoke()}},{key:"_assign",value:function(e){if("error"===e.type){var t={detail:{message:e,type:"M(PEG)-DASH"}},n=g.addEvent("playererror",t);this.element.dispatchEvent(n)}else{var i=g.addEvent(e.type,{detail:e});this.element.dispatchEvent(i)}}},{key:"_revoke",value:function(){var t=this;m(this,f)&&(Object.keys(m(this,f)).forEach(function(e){m(t,h).off(m(t,f)[e],t._assign.bind(t))}),v(this,f,[])),m(this,h).reset()}},{key:"_preparePlayer",value:function(){void 0===m(this,h).getDebug().setLogToBrowserConsole?m(this,h).updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}}):(m(this,h).getDebug().setLogToBrowserConsole(!1),m(this,h).setScheduleWhilePaused(!1),m(this,h).setFastSwitchEnabled(!0)),m(this,h).initialize(),m(this,h).attachView(this.element),m(this,h).setAutoPlay(!1),m(this,p)&&"object"===a(m(this,p).drm)&&Object.keys(m(this,p).drm).length&&(m(this,h).setProtectionData(m(this,p).drm),m(this,p).robustnessLevel&&m(this,p).robustnessLevel&&m(this,h).getProtectionController().setRobustnessLevel(m(this,p).robustnessLevel))}},{key:"src",set:function(e){var t=this;E.isDashSource(e)&&(this._revoke(),v(this,h,dashjs.MediaPlayer().create()),this._preparePlayer(),m(this,h).attachSource(e.src),v(this,f,dashjs.MediaPlayer.events),Object.keys(m(this,f)).forEach(function(e){m(t,h).on(m(t,f)[e],t._assign.bind(t))}))}},{key:"levels",get:function(){var s=[],a=[];if(m(this,h)){var e=m(this,h).getBitrateInfoListFor("video"),t=m(this,h).getBitrateInfoListFor("audio");e.length&&e.forEach(function(e,t){if(e){var n=e,i=n.height,r=(n.name,{height:i,id:t.toString(),label:e.width+"x"+e.height});s.push(r)}}),t.length&&t.forEach(function(e,t){if(e){var n=e,i=n.height,r=(n.name,{height:i,id:t.toString(),label:"audio "+parseInt(e.bitrate/1e3)});a.push(r)}})}return[].concat(s,a)}},{key:"audioLevels",get:function(){var s=[];if(m(this,h)){var e=m(this,h).getBitrateInfoListFor("audio");e.length&&e.forEach(function(e,t){if(e){var n=e,i=n.height,r=(n.name,{height:i,id:t.toString(),label:null});s.push(r)}})}return s}},{key:"level",set:function(e){if(0===e);else{for(var t=document.getElementsByClassName("op-settings__submenu-item"),n="video",i=0,r=t.length;i<r;++i)n=t[i].classList.contains("Audio")?"audio":"video";Number.isInteger(e)&&m(this,h).setQualityFor(n,e)}},get:function(){return m(this,h)?m(this,h).getQualityFor("video"):-1}},{key:"audioLevel",set:function(e){0===e||m(this,h).setQualityFor("audio",e)},get:function(){return m(this,h)?m(this,h).getQualityFor("audio"):-1}}])&&o(t.prototype,n),i&&o(t,i),s}();h=new WeakMap,f=new WeakMap,p=new WeakMap,t.default=r},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(i);if(r){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},m=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var y=n(1),g=n(6),b=n(2),E=n(14),_=r(n(30)),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,_["default"]);var t,n,i,r=l(s);function s(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i=r.call(this,e,t),d.set(c(i),void 0),h.set(c(i),{}),f.set(c(i),void 0),p(c(i),f,n),i.element=e,i.media=t,i.promise="undefined"==typeof flvjs?b.loadScript("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new _Promise(function(e){e({})}),i.promise.then(i._create.bind(c(i))),u(i,c(i))}return t=s,(n=[{key:"canPlayType",value:function(e){return y.HAS_MSE&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var r=this;v(this,d).unload(),v(this,d).detachMediaElement(),v(this,d).attachMediaElement(this.element),v(this,d).load();var e=g.addEvent("loadedmetadata");this.element.dispatchEvent(e),v(this,h)||(p(this,h,flvjs.Events),Object.keys(v(this,h)).forEach(function(i){v(r,d).on(v(r,h)[i],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._assign(v(r,h)[i],t)})}))}},{key:"destroy",value:function(){this._revoke()}},{key:"_create",value:function(){var r=this,e=v(this,f),t=e.configs,n=m(e,["configs"]);flvjs.LoggingControl.enableDebug=!(!n||!n.debug)&&n.debug,flvjs.LoggingControl.enableVerbose=!(!n||!n.debug)&&n.debug;var i=Object.assign(Object.assign({},n),{type:"flv",url:this.media.src});p(this,d,flvjs.createPlayer(i,t)),this.instance=v(this,d),v(this,h)||(p(this,h,flvjs.Events),Object.keys(v(this,h)).forEach(function(i){v(r,d).on(v(r,h)[i],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._assign(v(r,h)[i],t)})}))}},{key:"_assign",value:function(e,t){if("error"===e){var n={detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}},i=g.addEvent("playererror",n);this.element.dispatchEvent(i)}else{var r=g.addEvent(e,{detail:{data:t}});this.element.dispatchEvent(r)}}},{key:"_revoke",value:function(){v(this,d).destroy(),p(this,d,null)}},{key:"src",set:function(e){E.isFlvSource(e)&&(this._revoke(),this._create())}},{key:"levels",get:function(){var i=this,r=[];return v(this,d)&&v(this,d).levels&&v(this,d).levels.length&&Object.keys(v(this,d).levels).forEach(function(e){var t=v(i,d).levels[e],n={height:t.height,id:e,label:t.name||null};r.push(n)}),r}},{key:"level",set:function(e){v(this,d).currentLevel=e},get:function(){return v(this,d)?v(this,d).currentLevel:-1}}])&&a(t.prototype,n),i&&a(t,i),s}();d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=k},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(i);if(r){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,d,g,b,h,f,E=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},_=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},k=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var w=n(1),A=n(6),p=n(2),v=n(14),m=a(n(30)),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(a,m["default"]);var t,n,i,s=l(a);function a(e,t){var n,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length?arguments[3]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=s.call(this,e,t),y.set(c(n),void 0),d.set(c(n),{}),g.set(c(n),0),b.set(c(n),0),h.set(c(n),void 0),f.set(c(n),void 0),E(c(n),h,r),n.element=e,n.media=t,E(c(n),f,i),n.promise="undefined"==typeof Hls?p.loadScript("/library/openplayer/hls.min.js"):new _Promise(function(e){e({})}),n.promise.then(n._create.bind(c(n))),u(n,c(n))}return t=a,(n=[{key:"canPlayType",value:function(e){return w.SUPPORTS_HLS()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var r=this;_(this,y).detachMedia(),_(this,y).loadSource(this.media.src),_(this,y).attachMedia(this.element);var e=A.addEvent("loadedmetadata");this.element.dispatchEvent(e),_(this,d)||(E(this,d,Hls.Events),Object.keys(_(this,d)).forEach(function(i){_(r,y).on(_(r,d)[i],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._assign(_(r,d)[i],t)})}))}},{key:"destroy",value:function(){this._revoke()}},{key:"_create",value:function(){var r=this,e=_(this,h);e||(e={});var t=!("auto"!==this.element.preload&&!_(this,f));e.autoStartLoad=t,E(this,y,new Hls(e)),this.instance=_(this,y),E(this,d,Hls.Events),Object.keys(_(this,d)).forEach(function(i){_(r,y).on(_(r,d)[i],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._assign(_(r,d)[i],t)})}),t||(this.element.addEventListener("play",function(){_(r,y)&&_(r,y).startLoad()},w.EVENT_OPTIONS),this.element.addEventListener("pause",function(){_(r,y)&&_(r,y).stopLoad()},w.EVENT_OPTIONS))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var n={detail:{data:t,message:t[1].details,type:"HLS"}},i=A.addEvent("playererror",n);this.element.dispatchEvent(i);var r=t=t[1],s=r.type,a=r.fatal,o=k(t,["type","fatal"]);if(a)switch(s){case"mediaError":var l=(new Date).getTime();if(!_(this,g)||3e3<l-_(this,g))E(this,g,(new Date).getTime()),_(this,y).recoverMediaError();else if(!_(this,b)||3e3<l-_(this,b))E(this,b,(new Date).getTime()),_(this,y).swapAudioCodec(),_(this,y).recoverMediaError();else{var u=A.addEvent(s,{detail:{data:o}});this.element.dispatchEvent(u)}break;case"networkError":var c=A.addEvent(s,{detail:{data:o}});this.element.dispatchEvent(c);break;default:_(this,y).destroy();var d=A.addEvent(s,{detail:{data:o}});this.element.dispatchEvent(d)}else{var h=A.addEvent(s,{detail:{data:o}});this.element.dispatchEvent(h)}}else{if("hlsLevelLoaded"===e&&!0===t[1].details.live){this.element.setAttribute("op-live__enabled","true");var f=A.addEvent("timeupdate");this.element.dispatchEvent(f)}else if("hlsLevelUpdated"===e&&!0===t[1].details.live&&t[1].details.totalduration>w.DVR_THRESHOLD){this.element.setAttribute("op-dvr__enabled","true");var p=A.addEvent("timeupdate");this.element.dispatchEvent(p)}else if("hlsFragParsingMetadata"===e){var v=A.addEvent("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(v)}var m=A.addEvent(e,{detail:{data:t[1]}});this.element.dispatchEvent(m)}}},{key:"_revoke",value:function(){var r=this;_(this,y)&&_(this,y).stopLoad(),_(this,d)&&_(r,y)&&Object.keys(_(this,d)).forEach(function(i){_(r,y).off(_(r,d)[i],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._assign(_(r,d)[i],t)})}),this.element.removeEventListener("play",function(){_(r,y)&&_(r,y).startLoad()}),this.element.removeEventListener("pause",function(){_(r,y)&&_(r,y).stopLoad()}),_(this,y)&&_(this,y).destroy(),E(this,y,null)}},{key:"src",set:function(e){var r=this;v.isHlsSource(e)&&(this._revoke(),E(this,y,new Hls(_(this,h))),_(this,y).loadSource(e.src),_(this,y).attachMedia(this.element),E(this,d,Hls.Events),Object.keys(_(this,d)).forEach(function(i){_(r,y).on(_(r,d)[i],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._assign(_(r,d)[i],t)})}))}},{key:"levels",get:function(){var r=this,s=[];return _(this,y)&&_(this,y).levels&&_(this,y).levels.length&&Object.keys(_(this,y).levels).forEach(function(e){var t=_(r,y).levels[e],n=t.height,i=(t.name,{height:n,id:e,label:n.toString()||null});s.push(i)}),s}},{key:"level",set:function(e){_(this,y).currentLevel=e},get:function(){return _(this,y)?_(this,y).currentLevel:-1}}])&&r(t.prototype,n),i&&r(t,i),a}();y=new WeakMap,d=new WeakMap,g=new WeakMap,b=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=O},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(i);if(r){var n=o(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(6),g=n(2),b=n(14),E=l(n(30)),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,E["default"]);var t,n,i,o=a(l);function l(r,e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,r,e),d.set(c(t),null),h.set(c(t),[]),f.set(c(t),!1);var i,s=0,a=!1;if(r.addEventListener("playing",function(){i&&(clearInterval(i),s=0,a=!1)}),r.addEventListener("stalled",function(){a||(a=!0,i=setInterval(function(){if(30<=s){clearInterval(i);var e="Media download failed part-way due to a network error",t={detail:{data:{message:e,error:2},message:e,type:"HTML5"}},n=y.addEvent("playererror",t);r.dispatchEvent(n),s=0,a=!1}else s++},1e3))}),r.addEventListener("error",function(e){var t;switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case e.target.error.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case e.target.error.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the media used features your browser did not support.";break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed or because the format is not supported.";break;default:t="Unknown error occurred."}var n={detail:{data:Object.assign(Object.assign({},e),{message:e.message||t,error:e.target.error.code}),message:e.message||t,type:"HTML5"}},i=y.addEvent("playererror",n);r.dispatchEvent(i)},m.EVENT_OPTIONS),!g.isAudio(r)&&!g.isVideo(r))throw new TypeError("Native method only supports video/audio tags");return p(c(t),f,b.isHlsSource(e)),t.element.addEventListener("loadeddata",t._isDvrEnabled.bind(c(t)),m.EVENT_OPTIONS),t.element.textTracks.addEventListener("addtrack",t._readMediadataInfo.bind(c(t)),m.EVENT_OPTIONS),u(t,c(t))}return t=l,(n=[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){return this.element.removeEventListener("loadeddata",this._isDvrEnabled.bind(this)),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo.bind(this)),this}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(v(this,f)&&e>m.DVR_THRESHOLD&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=y.addEvent("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var r=this,t=e;"metadata"===t.track.kind&&(t.track.mode="hidden",t.track.addEventListener("cuechange",function(e){var t=e.target,n=t.activeCues?t.activeCues[0]:null;if(n){var i=y.addEvent("metadataready",{detail:n});r.element.dispatchEvent(i)}},m.EVENT_OPTIONS))}},{key:"levels",get:function(){if(!v(this,h).length)for(var e=this.element.querySelectorAll("source[title]"),t=0,n=e.length;t<n;++t){var i={height:0,id:"".concat(t),label:e[t].getAttribute("title")};v(this,h).push(i)}return v(this,h)}},{key:"level",set:function(t){var e=v(this,h).findIndex(function(e){return parseInt(e.id,10)===t});if(-1<e){p(this,d,this.levels[e]);for(var n=this.element.querySelectorAll("source[title]"),i=0,r=n.length;i<r;++i){var s=n[i].getAttribute("src");s&&parseInt(v(this,d).id,10)===i&&(this.element.src=s)}}},get:function(){return v(this,d)?v(this,d).id:"-1"}},{key:"src",set:function(e){this.element.src=e.src}}])&&r(t.prototype,n),i&&r(t,i),l}();d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=_},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m,l,y,g,b,u,E,_,k,w,c,A,O,d,h,f,p,v,T,S,L,M,P,N,I,C,x,j,D,R,W=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},V=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var F=n(1),H=n(6),q=n(2),r=function(){function o(e,t,n,i,r){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),m.set(this,!1),l.set(this,!1),y.set(this,!1),g.set(this,!1),b.set(this,0),u.set(this,void 0),E.set(this,!1),_.set(this,0),k.set(this,0),w.set(this,null),c.set(this,void 0),A.set(this,void 0),O.set(this,void 0),d.set(this,[]),h.set(this,void 0),f.set(this,void 0),p.set(this,void 0),v.set(this,void 0),T.set(this,void 0),S.set(this,void 0),L.set(this,!1),M.set(this,!1),P.set(this,!1),N.set(this,void 0),I.set(this,0),C.set(this,void 0),x.set(this,void 0),j.set(this,0),D.set(this,[]),R.set(this,!1);W(this,c,e),W(this,h,t),W(this,A,e.getMedia()),W(this,O,e.getElement()),W(this,L,n||!1),W(this,M,i||!1),W(this,N,Object.assign(Object.assign({},{autoPlayAdBreaks:!0,debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",src:[]}),r)),W(this,P,!1),W(this,C,V(this,O).volume),W(this,u,V(this,C));var a=V(this,N).debug?V(this,N).sdkPath.replace(/(\.js$)/,"_debug.js"):V(this,N).sdkPath;return W(this,f,"undefined"==typeof google||void 0===google.ima?q.loadScript(a):new _Promise(function(e){e({})})),V(this,f).then(function(){s.load()}),this}var e,t,n;return e=o,(t=[{key:"load",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(V(this,N).autoPlayAdBreaks||t){var n=V(this,c).getContainer().querySelector(".op-ads");n&&n.parentNode&&n.parentNode.removeChild(n),W(this,g,!0),W(this,v,document.createElement("div")),V(this,v).className="op-ads",V(this,v).tabIndex=-1,V(this,O).parentElement&&V(this,O).parentElement.insertBefore(V(this,v),V(this,O).nextSibling),W(this,D,V(this,A).src),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(V(this,N).autoPlayAdBreaks),google.ima.settings.setNumRedirects(V(this,N).numRedirects),google.ima.settings.setLocale(V(this,N).language),W(this,T,new google.ima.AdDisplayContainer(V(this,v),V(this,O))),W(this,p,new google.ima.AdsLoader(V(this,T))),V(this,p).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded.bind(this),F.EVENT_OPTIONS),V(this,p).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error.bind(this),F.EVENT_OPTIONS),"undefined"!=typeof window&&window.addEventListener("resize",function(){e.resizeAds()},F.EVENT_OPTIONS),V(this,O).addEventListener("loadedmetadata",function(){e.resizeAds()},F.EVENT_OPTIONS),!0!==V(this,L)&&!0!==V(this,M)&&!0!==t&&!0!==V(this,N).enablePreloading||(V(this,l)||(W(this,l,!0),V(this,T).initialize()),this._requestAds())}}},{key:"play",value:function(){var t=this,e=function(){if(V(t,l)){if(V(t,w)){V(t,b)||!1!==V(t,y)?V(t,w).resume():V(t,w).start(),W(t,y,!0);var e=H.addEvent("play");V(t,O).dispatchEvent(e)}}else t._initNotDoneAds()};return new _Promise(function(e){e({})}).then(e)}},{key:"pause",value:function(){if(V(this,w)){W(this,y,!1),V(this,w).pause();var e=H.addEvent("pause");V(this,O).dispatchEvent(e)}}},{key:"destroy",value:function(){var t=this;V(this,d)&&V(this,d).forEach(function(e){V(t,w).removeEventListener(e,t._assign.bind(t))}),W(this,d,[]);var e=V(this,c).getControls(),n=e?e.events.mouse:{};Object.keys(n).forEach(function(e){V(t,v)&&V(t,v).removeEventListener(e,n[e])}),V(this,p)&&(V(this,p).removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error.bind(this)),V(this,p).removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded.bind(this)));var i=!Array.isArray(V(this,h))||V(this,I)>V(this,h).length;V(this,w)&&i&&V(this,w).destroy(),(F.IS_IOS||F.IS_ANDROID)&&V(this,O).removeEventListener("loadedmetadata",this._contentLoadedAction.bind(this)),V(this,O).removeEventListener("loadedmetadata",function(){t.resizeAds.bind(t)}),V(this,O).removeEventListener("ended",this._contentEndedListener.bind(this)),"undefined"!=typeof window&&window.removeEventListener("resize",function(){t.resizeAds.bind(t)}),q.removeElement(V(this,v))}},{key:"resizeAds",value:function(e,t){var n=this;if(V(this,w)){var i,r=V(this,O),s="true"===r.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;i&&"undefined"!=typeof window&&window.cancelAnimationFrame(i),"undefined"!=typeof window&&(i=window.requestAnimationFrame(function(){V(n,w).resize(e||r.offsetWidth,t||r.offsetHeight,s)}))}}},{key:"getAdsManager",value:function(){return V(this,w)}},{key:"started",value:function(){return V(this,g)}},{key:"_assign",value:function(e){var t=this,n=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:if(n.isLinear()){if(F.IS_IPHONE&&q.isVideo(V(this,O))&&(V(this,O).controls=!1),W(this,_,n.getDuration()),W(this,k,n.getDuration()),!V(this,R)&&!F.IS_IOS&&!F.IS_ANDROID){var i=H.addEvent("waiting");V(this,O).dispatchEvent(i);var r=H.addEvent("loadedmetadata");V(this,O).dispatchEvent(r),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(n.isLinear()){V(this,O).parentElement&&!V(this,O).parentElement.classList.contains("op-ads--active")&&V(this,O).parentElement.classList.add("op-ads--active"),V(this,A).paused||V(this,A).pause(),W(this,y,!0);var s,a=H.addEvent("play");if(V(this,O).dispatchEvent(a),s||(this.resizeAds(),s=!0),V(this,A).ended){W(this,m,!1);var o=H.addEvent("adsmediaended");V(this,O).dispatchEvent(o)}"undefined"!=typeof window&&W(this,b,window.setInterval(function(){if(!0===V(t,y)){W(t,k,Math.round(V(t,w).getRemainingTime()));var e=H.addEvent("timeupdate");V(t,O).dispatchEvent(e)}},350))}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(n.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var l=H.addEvent("adsskipped");V(this,O).dispatchEvent(l)}V(this,O).parentElement&&V(this,O).parentElement.classList.remove("op-ads--active"),W(this,y,!1),clearInterval(V(this,b))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);case google.ima.AdEvent.Type.VOLUME_MUTED:if(n.isLinear()){var u=H.addEvent("volumechange");V(this,O).dispatchEvent(u)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(n.isLinear()&&(W(this,y,!1),W(this,m,!0),W(this,b,0),W(this,E,!1),W(this,g,!1),W(this,_,0),W(this,k,0),V(this,O).parentElement&&V(this,O).parentElement.classList.remove("op-ads--active"),this.destroy(),V(this,O).currentTime>=V(this,O).duration)){var c=H.addEvent("ended");V(this,O).dispatchEvent(c)}}if(e.type===google.ima.AdEvent.Type.LOG){var d=e.getAdData();if(d.adError){var h=d.adError.getMessage(),f={detail:{data:d.adError,message:h,type:"Ads"}},p=H.addEvent("playererror",f);V(this,O).dispatchEvent(p)}}else{var v=H.addEvent("ads".concat(e.type));V(this,O).dispatchEvent(v)}}},{key:"_error",value:function(e){var t=e.getError(),n={detail:{data:t,message:t.toString(),type:"Ads"}},i=H.addEvent("playererror",n);V(this,O).dispatchEvent(i);Array.isArray(V(this,h))&&1<V(this,h).length&&V(this,I)<V(this,h).length-1?(W(this,I,+V(this,I)+1),W(this,P,!0),W(this,g,!0),W(this,l,!1),this.destroy(),this.load(!0)):(-1<[100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(t.getErrorCode())&&V(this,w)&&V(this,w).destroy(),!0!==V(this,L)&&!0!==V(this,M)&&!0!==V(this,g)||(W(this,y,!1),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=V(this,N).enablePreloading,W(this,w,e.getAdsManager(V(this,O),t)),this._start(V(this,w))}},{key:"_start",value:function(t){var n=this;t.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested.bind(this),F.EVENT_OPTIONS),t.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested.bind(this),F.EVENT_OPTIONS),W(this,d,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG]),V(this,N).autoPlayAdBreaks||V(this,d).push(google.ima.AdEvent.Type.AD_BREAK_READY);var e=V(this,c).getControls(),i=e?e.events.mouse:{};if(Object.keys(i).forEach(function(e){V(n,v)&&V(n,v).addEventListener(e,i[e],F.EVENT_OPTIONS)}),V(this,d).forEach(function(e){t.addEventListener(e,n._assign.bind(n),F.EVENT_OPTIONS)}),!0===V(this,L)||!0===V(this,P)){if(W(this,P,!1),!V(this,l))return void this._initNotDoneAds();t.init(V(this,O).offsetWidth,V(this,O).offsetHeight,V(this,O).parentElement&&"true"===V(this,O).parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.start();var r=H.addEvent("play");V(this,O).dispatchEvent(r);var s=H.addEvent("playing");V(this,O).dispatchEvent(s)}else!0===V(this,N).enablePreloading&&t.init(V(this,O).offsetWidth,V(this,O).offsetHeight,V(this,O).parentElement&&"true"===V(this,O).parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){W(this,l,!0),V(this,T).initialize(),F.IS_IOS||F.IS_ANDROID?(W(this,x,this._contentLoadedAction),V(this,O).addEventListener("loadedmetadata",this._contentLoadedAction.bind(this),F.EVENT_OPTIONS),V(this,O).load()):this._contentLoadedAction()}},{key:"_contentEndedListener",value:function(){W(this,m,!0),W(this,y,!1),W(this,g,!1),V(this,p).contentComplete()}},{key:"_onContentPauseRequested",value:function(){V(this,O).removeEventListener("ended",this._contentEndedListener.bind(this)),W(this,j,V(this,A).currentTime),V(this,g)?V(this,A).pause():W(this,g,!0);var e=H.addEvent("play");V(this,O).dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){if(V(this,N).loop)Array.isArray(V(this,h))&&(V(this,I)===V(this,h).length-1?W(this,I,0):W(this,I,+V(this,I)+1)),this.destroy(),V(this,p).contentComplete(),W(this,P,!0),W(this,g,!0),W(this,l,!1),this.load(!0);else if(V(this,O).addEventListener("ended",this._contentEndedListener.bind(this),F.EVENT_OPTIONS),V(this,O).addEventListener("loadedmetadata",this._loadedMetadataHandler.bind(this),F.EVENT_OPTIONS),F.IS_IOS||F.IS_ANDROID)V(this,A).src=V(this,D),V(this,A).load(),this._prepareMedia(),V(this,O).parentElement&&V(this,O).parentElement.classList.add("op-ads--active");else{var e=H.addEvent("loadedmetadata");V(this,O).dispatchEvent(e)}}},{key:"_loadedMetadataHandler",value:function(){Array.isArray(V(this,h))?(W(this,I,+V(this,I)+1),V(this,I)<=V(this,h).length-1?(V(this,w)&&V(this,w).destroy(),V(this,p).contentComplete(),W(this,P,!0),W(this,g,!0),W(this,l,!1),this._requestAds()):(V(this,N).autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):V(this,O).seekable.length?V(this,O).seekable.end(0)>V(this,j)&&(V(this,N).autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler.bind(this),100)}},{key:"_resumeMedia",value:function(){var n=this;W(this,b,0),W(this,E,!1),W(this,g,!1),W(this,_,0),W(this,k,0),V(this,O).parentElement&&V(this,O).parentElement.classList.remove("op-ads--active");var i,r,e=function(e){var t=H.addEvent(e);V(n,O).dispatchEvent(t)};(i=50,r=V(this,A).ended,new _Promise(function(e,t){if(r)return t();setTimeout(e,i)})).then(function(){return V(n,A).play().then(function(){return e("play")})}).catch(function(){return e("ended")})}},{key:"_requestAds",value:function(){W(this,S,new google.ima.AdsRequest);var e=Array.isArray(V(this,h))?V(this,h)[V(this,I)]:V(this,h);q.isXml(e)?V(this,S).adsResponse=e:V(this,S).adTagUrl=e;var t=V(this,O).parentElement?V(this,O).parentElement.offsetWidth:0,n=V(this,O).parentElement?V(this,O).parentElement.offsetHeight:0;V(this,S).linearAdSlotWidth=t,V(this,S).linearAdSlotHeight=n,V(this,S).nonLinearAdSlotWidth=t,V(this,S).nonLinearAdSlotHeight=n/3,V(this,S).setAdWillAutoPlay(V(this,L)),V(this,S).setAdWillPlayMuted(V(this,M)),V(this,p).requestAds(V(this,S))}},{key:"_contentLoadedAction",value:function(){V(this,x)&&(V(this,O).removeEventListener("loadedmetadata",V(this,x).bind(this)),W(this,x,null)),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){V(this,w)&&V(this,w).destroy(),V(this,p).contentComplete(),W(this,l,!1),W(this,P,!0)}},{key:"_prepareMedia",value:function(){V(this,A).currentTime=V(this,j),V(this,O).removeEventListener("loadedmetadata",this._loadedMetadataHandler.bind(this)),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){V(this,A).volume=e,V(this,A).muted=0===e}},{key:"playRequested",set:function(e){W(this,P,e)}},{key:"volume",set:function(e){V(this,w)&&(W(this,u,e),V(this,w).setVolume(e),this._setMediaVolume(e),W(this,E,0===e))},get:function(){return V(this,w)?V(this,w).getVolume():V(this,C)}},{key:"muted",set:function(e){V(this,w)&&(e?(V(this,w).setVolume(0),W(this,E,!0),this._setMediaVolume(0)):(V(this,w).setVolume(V(this,u)),W(this,E,!1),this._setMediaVolume(V(this,u))))},get:function(){return V(this,E)}},{key:"currentTime",set:function(e){W(this,k,e)},get:function(){return V(this,k)}},{key:"duration",get:function(){return V(this,_)}},{key:"paused",get:function(){return!V(this,y)}},{key:"ended",get:function(){return V(this,m)}}])&&i(e.prototype,t),n&&i(e,n),o}();m=new WeakMap,l=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,E=new WeakMap,_=new WeakMap,k=new WeakMap,w=new WeakMap,c=new WeakMap,A=new WeakMap,O=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,T=new WeakMap,S=new WeakMap,L=new WeakMap,M=new WeakMap,P=new WeakMap,N=new WeakMap,I=new WeakMap,C=new WeakMap,x=new WeakMap,j=new WeakMap,D=new WeakMap,R=new WeakMap,t.default=r},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d,h,f,a,p,o,l,v,u,s,m=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var g=n(1),b=n(6),E=n(2),_=n(14),i=function(){function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),a.set(this,{button:{},global:{},media:{}}),p.set(this,void 0),o.set(this,void 0),l.set(this,[]),v.set(this,""),u.set(this,void 0),s.set(this,void 0),m(this,d,e),m(this,o,e.getOptions().labels),m(this,p,e.getOptions().detachMenus),m(this,u,t),m(this,s,n),this}var e,t,n;return e=i,(t=[{key:"create",value:function(){var c=this;m(this,v,"".concat(-1));var e=this._formatMenuItems(),t=e.length?e.find(function(e){return e.key===y(c,v)}):null,n=t?t.label:y(this,o).auto,i=!1;m(this,h,document.createElement("button")),y(this,h).className="op-controls__levels op-control__".concat(y(this,u)),y(this,h).tabIndex=0,y(this,h).title=y(this,o).mediaLevels,y(this,h).setAttribute("aria-controls",y(this,d).id),y(this,h).setAttribute("aria-label",y(this,o).mediaLevels),y(this,h).setAttribute("data-active-level",y(this,v)),y(this,h).innerHTML="<span>".concat(n,"</span>");var r=function(){y(c,l).length?i||(y(c,d).getMedia().level=-1,i=!0):(c._gatherLevels.bind(c),setTimeout(function(){y(c,d).getMedia().level=-1;var e=b.addEvent("controlschanged");y(c,d).getElement().dispatchEvent(e)},0))};y(this,a).media.loadedmetadata=r.bind(this),y(this,a).media.manifestLoaded=r.bind(this),y(this,a).media.hlsManifestParsed=r.bind(this),y(this,p)&&(this._buildMenu(),y(this,a).button.click=function(){if(y(c,p)){for(var e=y(c,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t]!==y(c,f)&&e[t].setAttribute("aria-hidden","true");"true"===y(c,f).getAttribute("aria-hidden")?y(c,f).setAttribute("aria-hidden","false"):y(c,f).setAttribute("aria-hidden","true")}},y(this,a).button.mouseover=function(){if(!g.IS_IOS&&!g.IS_ANDROID){for(var e=y(c,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t]!==y(c,f)&&e[t].setAttribute("aria-hidden","true");"true"===y(c,f).getAttribute("aria-hidden")&&y(c,f).setAttribute("aria-hidden","false")}},y(this,a).button.mouseout=function(){if(!g.IS_IOS&&!g.IS_ANDROID){for(var e=y(c,d).getContainer().querySelectorAll(".op-settings"),t=0,n=e.length;t<n;++t)e[t].setAttribute("aria-hidden","true");"false"===y(c,f).getAttribute("aria-hidden")&&y(c,f).setAttribute("aria-hidden","true")}},y(this,h).addEventListener("click",y(this,a).button.click,g.EVENT_OPTIONS),y(this,h).addEventListener("mouseover",y(this,a).button.mouseover,g.EVENT_OPTIONS),y(this,f).addEventListener("mouseover",y(this,a).button.mouseover,g.EVENT_OPTIONS),y(this,f).addEventListener("mouseout",y(this,a).button.mouseout,g.EVENT_OPTIONS),y(this,d).getElement().addEventListener("controlshidden",y(this,a).button.mouseout,g.EVENT_OPTIONS)),y(this,a).global.click=function(e){var t=e.target,n=y(c,d).getMedia().currentTime,i=y(c,d).getMedia().paused;if(t.closest("#".concat(y(c,d).id))&&E.hasClass(t,"op-audio-levels__option")){var r=t.getAttribute("data-value"),s=parseInt(r?r.replace("audioLevels-",""):"-1",10);if(m(c,v,"".concat(s)),y(c,p)){y(c,h).setAttribute("data-active-level","".concat(s)),y(c,h).innerHTML="<span>".concat(t.innerText,"</span>");for(var a=t.parentElement&&t.parentElement.parentElement?t.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],o=0,l=a.length;o<l;++o)a[o].setAttribute("aria-checked","false");t.parentElement&&t.parentElement.setAttribute("aria-checked","true"),y(c,f).setAttribute("aria-hidden","false")}y(c,d).getMedia().level=s,y(c,d).getMedia().currentTime=n,i||y(c,d).play();var u=b.addEvent("levelchanged",{detail:{label:t.innerText.trim(),level:s}});y(c,d).getElement().dispatchEvent(u),e.preventDefault()}};var s=g.NAV.connection||g.NAV.mozConnection||g.NAV.webkitConnection;y(this,a).global.connection=function(){var e=y(c,d).getMedia().current;if(!_.isDashSource(e)&&!_.isHlsSource(e)){var t=s.effectiveType,n=y(c,l).map(function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})}),i=n.find(function(e){return e.resolution<360});"4g"===t?i=n.find(function(e){return 720<=e.resolution}):"3g"===t&&(i=n.find(function(e){return 360<=e.resolution&&e.resolution<720})),i&&(y(c,d).pause(),y(c,d).getMedia().level=i.id,y(c,d).play()),t=s.effectiveType}},Object.keys(y(this,a).media).forEach(function(e){y(c,d).getElement().addEventListener(e,y(c,a).media[e],g.EVENT_OPTIONS)}),document.addEventListener("click",y(this,a).global.click,g.EVENT_OPTIONS),s&&s.addEventListener("change",y(this,a).global.connection,g.EVENT_OPTIONS)}},{key:"destroy",value:function(){var t=this,e=g.NAV.connection||g.NAV.mozConnection||g.NAV.webkitConnection;Object.keys(y(this,a).media).forEach(function(e){y(t,d).getElement().removeEventListener(e,y(t,a).media[e])}),document.removeEventListener("click",y(this,a).global.click),e&&e.removeEventListener("change",y(this,a).global.connection),y(this,p)&&(y(this,h).removeEventListener("click",y(this,a).button.click),E.removeElement(y(this,h)),y(this,h).removeEventListener("mouseover",y(this,a).button.mouseover),y(this,f).removeEventListener("mouseover",y(this,a).button.mouseover),y(this,f).removeEventListener("mouseout",y(this,a).button.mouseout),y(this,d).getElement().removeEventListener("controlshidden",y(this,a).button.mouseout),E.removeElement(y(this,f)))}},{key:"addSettings",value:function(){if(y(this,p))return{};var e=this._formatMenuItems();return 2<e.length?{className:"op-audio-levels__option",default:y(this,v)||"-1",key:"audioLevels",name:y(this,o).audioLevels,subitems:e}:{}}},{key:"_formatMenuItems",value:function(){for(var n=this._gatherLevels(),e=n.length,i=e?[{key:"-1",label:y(this,o).auto}]:[],t=function(e){var t=n[e];(i=i.filter(function(e){return e.key!==t.id})).push({key:t.id,label:t.label})},r=0;r<e;r++)t(r);return i=i.reduce(function(e,t){return e.find(function(e){return e.label===t.label})?e:e.concat([t])},[]).sort(function(e,t){return parseInt(e.label,10)>parseInt(t.label,10)?1:-1})}},{key:"_getResolutionsLabel",value:function(e){return 4320<=e?"8K":2160<=e?"4K":1440<=e?"1440p":1080<=e?"1080p":720<=e?"720p":480<=e?"480p":360<=e?"360p":240<=e?"240p":144<=e?"144p":y(this,o).auto}},{key:"_gatherLevels",value:function(){var t=this;return y(this,l).length||y(this,d).getMedia().levels.forEach(function(e){e.label&&e.label.startsWith("audio ")&&y(t,l).push(Object.assign(Object.assign({},e),{label:e.label.substr(6)||t._getResolutionsLabel(e.height)}))}),y(this,l)}},{key:"_buildMenu",value:function(){var t=this;if(y(this,p)){y(this,h).classList.add("op-control--no-hover"),m(this,f,document.createElement("div")),y(this,f).className="op-settings op-levels__menu",y(this,f).setAttribute("aria-hidden","true");var e=this._formatMenuItems(),n='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(e.map(function(e){return'\n                <div class="op-settings__submenu-item audio" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(y(t,v)===e.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-audio-levels__option",'" data-value="levels-').concat(e.key,'">').concat(e.label,"</div>\n                </div>")}).join(""),"\n            </div>");y(this,f).innerHTML=n;var i=document.createElement("div");i.className="op-controls__container op-control__".concat(y(this,u)),locationSearch.get("ticket")||(i.appendChild(y(this,h)),i.appendChild(y(this,f))),y(this,d).getControls().getLayer(y(this,s)).appendChild(i)}}}])&&r(e.prototype,t),n&&r(e,n),i}();d=new WeakMap,h=new WeakMap,f=new WeakMap,a=new WeakMap,p=new WeakMap,o=new WeakMap,l=new WeakMap,v=new WeakMap,u=new WeakMap,s=new WeakMap,t.default=i}]).default});